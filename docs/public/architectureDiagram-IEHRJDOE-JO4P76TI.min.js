import{a as Ne}from"./chunk-WMZJ2DJX.min.js";import{a as ke}from"./chunk-FVZXFQFD.min.js";import{a as qe}from"./chunk-PRZOPTBR.min.js";import{a as Qe}from"./chunk-GZLS4OW7.min.js";import{a as Je}from"./chunk-ZTKXNV77.min.js";import"./chunk-VJXNA5BI.min.js";import"./chunk-COLRPQUI.min.js";import"./chunk-NHVEDRLN.min.js";import"./chunk-YXKR47QA.min.js";import"./chunk-RRYCMOMA.min.js";import"./chunk-2ON4K7Y6.min.js";import"./chunk-ZVD22KCG.min.js";import"./chunk-U4DUTLYF.min.js";import"./chunk-IQQ46AC6.min.js";import{a as Be,b as $e,c as fe}from"./chunk-XLHIBIKQ.min.js";import{d as ce}from"./chunk-HIDDNCQI.min.js";import"./chunk-S6HPVO4S.min.js";import"./chunk-CM5D5KZN.min.js";import{P as Ge,S as Ue,T as Ye,U as Xe,V as He,W as We,X as Ve,Y as ze,Z as ae,h as at,ia as Ze,j as Te,v as Pe}from"./chunk-KKRGZEDV.min.js";import"./chunk-CXRPJJJE.min.js";import{a as me,d as gr}from"./chunk-OSRY5VT3.min.js";var Ae=me((ne,Le)=>{(function(M,L){typeof ne=="object"&&typeof Le=="object"?Le.exports=L():typeof define=="function"&&define.amd?define([],L):typeof ne=="object"?ne.layoutBase=L():M.layoutBase=L()})(ne,function(){return function(m){var M={};function L(g){if(M[g])return M[g].exports;var s=M[g]={i:g,l:!1,exports:{}};return m[g].call(s.exports,s,s.exports,L),s.l=!0,s.exports}return L.m=m,L.c=M,L.i=function(g){return g},L.d=function(g,s,a){L.o(g,s)||Object.defineProperty(g,s,{configurable:!1,enumerable:!0,get:a})},L.n=function(g){var s=g&&g.__esModule?function(){return g.default}:function(){return g};return L.d(s,"a",s),s},L.o=function(g,s){return Object.prototype.hasOwnProperty.call(g,s)},L.p="",L(L.s=28)}([function(m,M,L){"use strict";function g(){}g.QUALITY=1,g.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,g.DEFAULT_INCREMENTAL=!1,g.DEFAULT_ANIMATION_ON_LAYOUT=!0,g.DEFAULT_ANIMATION_DURING_LAYOUT=!1,g.DEFAULT_ANIMATION_PERIOD=50,g.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,g.DEFAULT_GRAPH_MARGIN=15,g.NODE_DIMENSIONS_INCLUDE_LABELS=!1,g.SIMPLE_NODE_SIZE=40,g.SIMPLE_NODE_HALF_SIZE=g.SIMPLE_NODE_SIZE/2,g.EMPTY_COMPOUND_NODE_SIZE=40,g.MIN_EDGE_LENGTH=1,g.WORLD_BOUNDARY=1e6,g.INITIAL_WORLD_BOUNDARY=g.WORLD_BOUNDARY/1e3,g.WORLD_CENTER_X=1200,g.WORLD_CENTER_Y=900,m.exports=g},function(m,M,L){"use strict";var g=L(2),s=L(8),a=L(9);function i(f,t,u){g.call(this,u),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=u,this.bendpoints=[],this.source=f,this.target=t}i.prototype=Object.create(g.prototype);for(var n in g)i[n]=g[n];i.prototype.getSource=function(){return this.source},i.prototype.getTarget=function(){return this.target},i.prototype.isInterGraph=function(){return this.isInterGraph},i.prototype.getLength=function(){return this.length},i.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},i.prototype.getBendpoints=function(){return this.bendpoints},i.prototype.getLca=function(){return this.lca},i.prototype.getSourceInLca=function(){return this.sourceInLca},i.prototype.getTargetInLca=function(){return this.targetInLca},i.prototype.getOtherEnd=function(f){if(this.source===f)return this.target;if(this.target===f)return this.source;throw"Node is not incident with this edge"},i.prototype.getOtherEndInGraph=function(f,t){for(var u=this.getOtherEnd(f),r=t.getGraphManager().getRoot();;){if(u.getOwner()==t)return u;if(u.getOwner()==r)break;u=u.getOwner().getParent()}return null},i.prototype.updateLength=function(){var f=new Array(4);this.isOverlapingSourceAndTarget=s.getIntersection(this.target.getRect(),this.source.getRect(),f),this.isOverlapingSourceAndTarget||(this.lengthX=f[0]-f[2],this.lengthY=f[1]-f[3],Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},i.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},m.exports=i},function(m,M,L){"use strict";function g(s){this.vGraphObject=s}m.exports=g},function(m,M,L){"use strict";var g=L(2),s=L(10),a=L(13),i=L(0),n=L(16),f=L(5);function t(r,e,o,c){o==null&&c==null&&(c=e),g.call(this,c),r.graphManager!=null&&(r=r.graphManager),this.estimatedSize=s.MIN_VALUE,this.inclusionTreeDepth=s.MAX_VALUE,this.vGraphObject=c,this.edges=[],this.graphManager=r,o!=null&&e!=null?this.rect=new a(e.x,e.y,o.width,o.height):this.rect=new a}t.prototype=Object.create(g.prototype);for(var u in g)t[u]=g[u];t.prototype.getEdges=function(){return this.edges},t.prototype.getChild=function(){return this.child},t.prototype.getOwner=function(){return this.owner},t.prototype.getWidth=function(){return this.rect.width},t.prototype.setWidth=function(r){this.rect.width=r},t.prototype.getHeight=function(){return this.rect.height},t.prototype.setHeight=function(r){this.rect.height=r},t.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},t.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},t.prototype.getCenter=function(){return new f(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},t.prototype.getLocation=function(){return new f(this.rect.x,this.rect.y)},t.prototype.getRect=function(){return this.rect},t.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},t.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},t.prototype.setRect=function(r,e){this.rect.x=r.x,this.rect.y=r.y,this.rect.width=e.width,this.rect.height=e.height},t.prototype.setCenter=function(r,e){this.rect.x=r-this.rect.width/2,this.rect.y=e-this.rect.height/2},t.prototype.setLocation=function(r,e){this.rect.x=r,this.rect.y=e},t.prototype.moveBy=function(r,e){this.rect.x+=r,this.rect.y+=e},t.prototype.getEdgeListToNode=function(r){var e=[],o,c=this;return c.edges.forEach(function(h){if(h.target==r){if(h.source!=c)throw"Incorrect edge source!";e.push(h)}}),e},t.prototype.getEdgesBetween=function(r){var e=[],o,c=this;return c.edges.forEach(function(h){if(!(h.source==c||h.target==c))throw"Incorrect edge source and/or target";(h.target==r||h.source==r)&&e.push(h)}),e},t.prototype.getNeighborsList=function(){var r=new Set,e=this;return e.edges.forEach(function(o){if(o.source==e)r.add(o.target);else{if(o.target!=e)throw"Incorrect incidency!";r.add(o.source)}}),r},t.prototype.withChildren=function(){var r=new Set,e,o;if(r.add(this),this.child!=null)for(var c=this.child.getNodes(),h=0;h<c.length;h++)e=c[h],o=e.withChildren(),o.forEach(function(N){r.add(N)});return r},t.prototype.getNoOfChildren=function(){var r=0,e;if(this.child==null)r=1;else for(var o=this.child.getNodes(),c=0;c<o.length;c++)e=o[c],r+=e.getNoOfChildren();return r==0&&(r=1),r},t.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},t.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},t.prototype.scatter=function(){var r,e,o=-i.INITIAL_WORLD_BOUNDARY,c=i.INITIAL_WORLD_BOUNDARY;r=i.WORLD_CENTER_X+n.nextDouble()*(c-o)+o;var h=-i.INITIAL_WORLD_BOUNDARY,N=i.INITIAL_WORLD_BOUNDARY;e=i.WORLD_CENTER_Y+n.nextDouble()*(N-h)+h,this.rect.x=r,this.rect.y=e},t.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var r=this.getChild();if(r.updateBounds(!0),this.rect.x=r.getLeft(),this.rect.y=r.getTop(),this.setWidth(r.getRight()-r.getLeft()),this.setHeight(r.getBottom()-r.getTop()),i.NODE_DIMENSIONS_INCLUDE_LABELS){var e=r.getRight()-r.getLeft(),o=r.getBottom()-r.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(e+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>e?(this.rect.x-=(this.labelWidth-e)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(e+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(o+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>o?(this.rect.y-=(this.labelHeight-o)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(o+this.labelHeight))}}},t.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==s.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},t.prototype.transform=function(r){var e=this.rect.x;e>i.WORLD_BOUNDARY?e=i.WORLD_BOUNDARY:e<-i.WORLD_BOUNDARY&&(e=-i.WORLD_BOUNDARY);var o=this.rect.y;o>i.WORLD_BOUNDARY?o=i.WORLD_BOUNDARY:o<-i.WORLD_BOUNDARY&&(o=-i.WORLD_BOUNDARY);var c=new f(e,o),h=r.inverseTransformPoint(c);this.setLocation(h.x,h.y)},t.prototype.getLeft=function(){return this.rect.x},t.prototype.getRight=function(){return this.rect.x+this.rect.width},t.prototype.getTop=function(){return this.rect.y},t.prototype.getBottom=function(){return this.rect.y+this.rect.height},t.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},m.exports=t},function(m,M,L){"use strict";var g=L(0);function s(){}for(var a in g)s[a]=g[a];s.MAX_ITERATIONS=2500,s.DEFAULT_EDGE_LENGTH=50,s.DEFAULT_SPRING_STRENGTH=.45,s.DEFAULT_REPULSION_STRENGTH=4500,s.DEFAULT_GRAVITY_STRENGTH=.4,s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,s.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,s.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,s.COOLING_ADAPTATION_FACTOR=.33,s.ADAPTATION_LOWER_NODE_LIMIT=1e3,s.ADAPTATION_UPPER_NODE_LIMIT=5e3,s.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,s.MAX_NODE_DISPLACEMENT=s.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,s.MIN_REPULSION_DIST=s.DEFAULT_EDGE_LENGTH/10,s.CONVERGENCE_CHECK_PERIOD=100,s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,s.MIN_EDGE_LENGTH=1,s.GRID_CALCULATION_CHECK_PERIOD=10,m.exports=s},function(m,M,L){"use strict";function g(s,a){s==null&&a==null?(this.x=0,this.y=0):(this.x=s,this.y=a)}g.prototype.getX=function(){return this.x},g.prototype.getY=function(){return this.y},g.prototype.setX=function(s){this.x=s},g.prototype.setY=function(s){this.y=s},g.prototype.getDifference=function(s){return new DimensionD(this.x-s.x,this.y-s.y)},g.prototype.getCopy=function(){return new g(this.x,this.y)},g.prototype.translate=function(s){return this.x+=s.width,this.y+=s.height,this},m.exports=g},function(m,M,L){"use strict";var g=L(2),s=L(10),a=L(0),i=L(7),n=L(3),f=L(1),t=L(13),u=L(12),r=L(11);function e(c,h,N){g.call(this,N),this.estimatedSize=s.MIN_VALUE,this.margin=a.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=c,h!=null&&h instanceof i?this.graphManager=h:h!=null&&h instanceof Layout&&(this.graphManager=h.graphManager)}e.prototype=Object.create(g.prototype);for(var o in g)e[o]=g[o];e.prototype.getNodes=function(){return this.nodes},e.prototype.getEdges=function(){return this.edges},e.prototype.getGraphManager=function(){return this.graphManager},e.prototype.getParent=function(){return this.parent},e.prototype.getLeft=function(){return this.left},e.prototype.getRight=function(){return this.right},e.prototype.getTop=function(){return this.top},e.prototype.getBottom=function(){return this.bottom},e.prototype.isConnected=function(){return this.isConnected},e.prototype.add=function(c,h,N){if(h==null&&N==null){var p=c;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(p)>-1)throw"Node already in graph!";return p.owner=this,this.getNodes().push(p),p}else{var y=c;if(!(this.getNodes().indexOf(h)>-1&&this.getNodes().indexOf(N)>-1))throw"Source or target not in graph!";if(!(h.owner==N.owner&&h.owner==this))throw"Both owners must be this graph!";return h.owner!=N.owner?null:(y.source=h,y.target=N,y.isInterGraph=!1,this.getEdges().push(y),h.edges.push(y),N!=h&&N.edges.push(y),y)}},e.prototype.remove=function(c){var h=c;if(c instanceof n){if(h==null)throw"Node is null!";if(!(h.owner!=null&&h.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var N=h.edges.slice(),p,y=N.length,A=0;A<y;A++)p=N[A],p.isInterGraph?this.graphManager.remove(p):p.source.owner.remove(p);var R=this.nodes.indexOf(h);if(R==-1)throw"Node not in owner node list!";this.nodes.splice(R,1)}else if(c instanceof f){var p=c;if(p==null)throw"Edge is null!";if(!(p.source!=null&&p.target!=null))throw"Source and/or target is null!";if(!(p.source.owner!=null&&p.target.owner!=null&&p.source.owner==this&&p.target.owner==this))throw"Source and/or target owner is invalid!";var C=p.source.edges.indexOf(p),S=p.target.edges.indexOf(p);if(!(C>-1&&S>-1))throw"Source and/or target doesn't know this edge!";p.source.edges.splice(C,1),p.target!=p.source&&p.target.edges.splice(S,1);var R=p.source.owner.getEdges().indexOf(p);if(R==-1)throw"Not in owner's edge list!";p.source.owner.getEdges().splice(R,1)}},e.prototype.updateLeftTop=function(){for(var c=s.MAX_VALUE,h=s.MAX_VALUE,N,p,y,A=this.getNodes(),R=A.length,C=0;C<R;C++){var S=A[C];N=S.getTop(),p=S.getLeft(),c>N&&(c=N),h>p&&(h=p)}return c==s.MAX_VALUE?null:(A[0].getParent().paddingLeft!=null?y=A[0].getParent().paddingLeft:y=this.margin,this.left=h-y,this.top=c-y,new u(this.left,this.top))},e.prototype.updateBounds=function(c){for(var h=s.MAX_VALUE,N=-s.MAX_VALUE,p=s.MAX_VALUE,y=-s.MAX_VALUE,A,R,C,S,V,Y=this.nodes,Q=Y.length,x=0;x<Q;x++){var k=Y[x];c&&k.child!=null&&k.updateBounds(),A=k.getLeft(),R=k.getRight(),C=k.getTop(),S=k.getBottom(),h>A&&(h=A),N<R&&(N=R),p>C&&(p=C),y<S&&(y=S)}var l=new t(h,p,N-h,y-p);h==s.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),Y[0].getParent().paddingLeft!=null?V=Y[0].getParent().paddingLeft:V=this.margin,this.left=l.x-V,this.right=l.x+l.width+V,this.top=l.y-V,this.bottom=l.y+l.height+V},e.calculateBounds=function(c){for(var h=s.MAX_VALUE,N=-s.MAX_VALUE,p=s.MAX_VALUE,y=-s.MAX_VALUE,A,R,C,S,V=c.length,Y=0;Y<V;Y++){var Q=c[Y];A=Q.getLeft(),R=Q.getRight(),C=Q.getTop(),S=Q.getBottom(),h>A&&(h=A),N<R&&(N=R),p>C&&(p=C),y<S&&(y=S)}var x=new t(h,p,N-h,y-p);return x},e.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},e.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},e.prototype.calcEstimatedSize=function(){for(var c=0,h=this.nodes,N=h.length,p=0;p<N;p++){var y=h[p];c+=y.calcEstimatedSize()}return c==0?this.estimatedSize=a.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=c/Math.sqrt(this.nodes.length),this.estimatedSize},e.prototype.updateConnected=function(){var c=this;if(this.nodes.length==0){this.isConnected=!0;return}var h=new r,N=new Set,p=this.nodes[0],y,A,R=p.withChildren();for(R.forEach(function(x){h.push(x),N.add(x)});h.length!==0;){p=h.shift(),y=p.getEdges();for(var C=y.length,S=0;S<C;S++){var V=y[S];if(A=V.getOtherEndInGraph(p,this),A!=null&&!N.has(A)){var Y=A.withChildren();Y.forEach(function(x){h.push(x),N.add(x)})}}}if(this.isConnected=!1,N.size>=this.nodes.length){var Q=0;N.forEach(function(x){x.owner==c&&Q++}),Q==this.nodes.length&&(this.isConnected=!0)}},m.exports=e},function(m,M,L){"use strict";var g,s=L(1);function a(i){g=L(6),this.layout=i,this.graphs=[],this.edges=[]}a.prototype.addRoot=function(){var i=this.layout.newGraph(),n=this.layout.newNode(null),f=this.add(i,n);return this.setRootGraph(f),this.rootGraph},a.prototype.add=function(i,n,f,t,u){if(f==null&&t==null&&u==null){if(i==null)throw"Graph is null!";if(n==null)throw"Parent node is null!";if(this.graphs.indexOf(i)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(i),i.parent!=null)throw"Already has a parent!";if(n.child!=null)throw"Already has a child!";return i.parent=n,n.child=i,i}else{u=f,t=n,f=i;var r=t.getOwner(),e=u.getOwner();if(!(r!=null&&r.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(e!=null&&e.getGraphManager()==this))throw"Target not in this graph mgr!";if(r==e)return f.isInterGraph=!1,r.add(f,t,u);if(f.isInterGraph=!0,f.source=t,f.target=u,this.edges.indexOf(f)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(f),!(f.source!=null&&f.target!=null))throw"Edge source and/or target is null!";if(!(f.source.edges.indexOf(f)==-1&&f.target.edges.indexOf(f)==-1))throw"Edge already in source and/or target incidency list!";return f.source.edges.push(f),f.target.edges.push(f),f}},a.prototype.remove=function(i){if(i instanceof g){var n=i;if(n.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(n==this.rootGraph||n.parent!=null&&n.parent.graphManager==this))throw"Invalid parent node!";var f=[];f=f.concat(n.getEdges());for(var t,u=f.length,r=0;r<u;r++)t=f[r],n.remove(t);var e=[];e=e.concat(n.getNodes());var o;u=e.length;for(var r=0;r<u;r++)o=e[r],n.remove(o);n==this.rootGraph&&this.setRootGraph(null);var c=this.graphs.indexOf(n);this.graphs.splice(c,1),n.parent=null}else if(i instanceof s){if(t=i,t==null)throw"Edge is null!";if(!t.isInterGraph)throw"Not an inter-graph edge!";if(!(t.source!=null&&t.target!=null))throw"Source and/or target is null!";if(!(t.source.edges.indexOf(t)!=-1&&t.target.edges.indexOf(t)!=-1))throw"Source and/or target doesn't know this edge!";var c=t.source.edges.indexOf(t);if(t.source.edges.splice(c,1),c=t.target.edges.indexOf(t),t.target.edges.splice(c,1),!(t.source.owner!=null&&t.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(t.source.owner.getGraphManager().edges.indexOf(t)==-1)throw"Not in owner graph manager's edge list!";var c=t.source.owner.getGraphManager().edges.indexOf(t);t.source.owner.getGraphManager().edges.splice(c,1)}},a.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},a.prototype.getGraphs=function(){return this.graphs},a.prototype.getAllNodes=function(){if(this.allNodes==null){for(var i=[],n=this.getGraphs(),f=n.length,t=0;t<f;t++)i=i.concat(n[t].getNodes());this.allNodes=i}return this.allNodes},a.prototype.resetAllNodes=function(){this.allNodes=null},a.prototype.resetAllEdges=function(){this.allEdges=null},a.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},a.prototype.getAllEdges=function(){if(this.allEdges==null){for(var i=[],n=this.getGraphs(),f=n.length,t=0;t<n.length;t++)i=i.concat(n[t].getEdges());i=i.concat(this.edges),this.allEdges=i}return this.allEdges},a.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},a.prototype.setAllNodesToApplyGravitation=function(i){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=i},a.prototype.getRoot=function(){return this.rootGraph},a.prototype.setRootGraph=function(i){if(i.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=i,i.parent==null&&(i.parent=this.layout.newNode("Root node"))},a.prototype.getLayout=function(){return this.layout},a.prototype.isOneAncestorOfOther=function(i,n){if(!(i!=null&&n!=null))throw"assert failed";if(i==n)return!0;var f=i.getOwner(),t;do{if(t=f.getParent(),t==null)break;if(t==n)return!0;if(f=t.getOwner(),f==null)break}while(!0);f=n.getOwner();do{if(t=f.getParent(),t==null)break;if(t==i)return!0;if(f=t.getOwner(),f==null)break}while(!0);return!1},a.prototype.calcLowestCommonAncestors=function(){for(var i,n,f,t,u,r=this.getAllEdges(),e=r.length,o=0;o<e;o++){if(i=r[o],n=i.source,f=i.target,i.lca=null,i.sourceInLca=n,i.targetInLca=f,n==f){i.lca=n.getOwner();continue}for(t=n.getOwner();i.lca==null;){for(i.targetInLca=f,u=f.getOwner();i.lca==null;){if(u==t){i.lca=u;break}if(u==this.rootGraph)break;if(i.lca!=null)throw"assert failed";i.targetInLca=u.getParent(),u=i.targetInLca.getOwner()}if(t==this.rootGraph)break;i.lca==null&&(i.sourceInLca=t.getParent(),t=i.sourceInLca.getOwner())}if(i.lca==null)throw"assert failed"}},a.prototype.calcLowestCommonAncestor=function(i,n){if(i==n)return i.getOwner();var f=i.getOwner();do{if(f==null)break;var t=n.getOwner();do{if(t==null)break;if(t==f)return t;t=t.getParent().getOwner()}while(!0);f=f.getParent().getOwner()}while(!0);return f},a.prototype.calcInclusionTreeDepths=function(i,n){i==null&&n==null&&(i=this.rootGraph,n=1);for(var f,t=i.getNodes(),u=t.length,r=0;r<u;r++)f=t[r],f.inclusionTreeDepth=n,f.child!=null&&this.calcInclusionTreeDepths(f.child,n+1)},a.prototype.includesInvalidEdge=function(){for(var i,n=[],f=this.edges.length,t=0;t<f;t++)i=this.edges[t],this.isOneAncestorOfOther(i.source,i.target)&&n.push(i);for(var t=0;t<n.length;t++)this.remove(n[t]);return!1},m.exports=a},function(m,M,L){"use strict";var g=L(12);function s(){}s.calcSeparationAmount=function(a,i,n,f){if(!a.intersects(i))throw"assert failed";var t=new Array(2);this.decideDirectionsForOverlappingNodes(a,i,t),n[0]=Math.min(a.getRight(),i.getRight())-Math.max(a.x,i.x),n[1]=Math.min(a.getBottom(),i.getBottom())-Math.max(a.y,i.y),a.getX()<=i.getX()&&a.getRight()>=i.getRight()?n[0]+=Math.min(i.getX()-a.getX(),a.getRight()-i.getRight()):i.getX()<=a.getX()&&i.getRight()>=a.getRight()&&(n[0]+=Math.min(a.getX()-i.getX(),i.getRight()-a.getRight())),a.getY()<=i.getY()&&a.getBottom()>=i.getBottom()?n[1]+=Math.min(i.getY()-a.getY(),a.getBottom()-i.getBottom()):i.getY()<=a.getY()&&i.getBottom()>=a.getBottom()&&(n[1]+=Math.min(a.getY()-i.getY(),i.getBottom()-a.getBottom()));var u=Math.abs((i.getCenterY()-a.getCenterY())/(i.getCenterX()-a.getCenterX()));i.getCenterY()===a.getCenterY()&&i.getCenterX()===a.getCenterX()&&(u=1);var r=u*n[0],e=n[1]/u;n[0]<e?e=n[0]:r=n[1],n[0]=-1*t[0]*(e/2+f),n[1]=-1*t[1]*(r/2+f)},s.decideDirectionsForOverlappingNodes=function(a,i,n){a.getCenterX()<i.getCenterX()?n[0]=-1:n[0]=1,a.getCenterY()<i.getCenterY()?n[1]=-1:n[1]=1},s.getIntersection2=function(a,i,n){var f=a.getCenterX(),t=a.getCenterY(),u=i.getCenterX(),r=i.getCenterY();if(a.intersects(i))return n[0]=f,n[1]=t,n[2]=u,n[3]=r,!0;var e=a.getX(),o=a.getY(),c=a.getRight(),h=a.getX(),N=a.getBottom(),p=a.getRight(),y=a.getWidthHalf(),A=a.getHeightHalf(),R=i.getX(),C=i.getY(),S=i.getRight(),V=i.getX(),Y=i.getBottom(),Q=i.getRight(),x=i.getWidthHalf(),k=i.getHeightHalf(),l=!1,E=!1;if(f===u){if(t>r)return n[0]=f,n[1]=o,n[2]=u,n[3]=Y,!1;if(t<r)return n[0]=f,n[1]=N,n[2]=u,n[3]=C,!1}else if(t===r){if(f>u)return n[0]=e,n[1]=t,n[2]=S,n[3]=r,!1;if(f<u)return n[0]=c,n[1]=t,n[2]=R,n[3]=r,!1}else{var d=a.height/a.width,T=i.height/i.width,v=(r-t)/(u-f),D=void 0,O=void 0,P=void 0,F=void 0,I=void 0,Z=void 0;if(-d===v?f>u?(n[0]=h,n[1]=N,l=!0):(n[0]=c,n[1]=o,l=!0):d===v&&(f>u?(n[0]=e,n[1]=o,l=!0):(n[0]=p,n[1]=N,l=!0)),-T===v?u>f?(n[2]=V,n[3]=Y,E=!0):(n[2]=S,n[3]=C,E=!0):T===v&&(u>f?(n[2]=R,n[3]=C,E=!0):(n[2]=Q,n[3]=Y,E=!0)),l&&E)return!1;if(f>u?t>r?(D=this.getCardinalDirection(d,v,4),O=this.getCardinalDirection(T,v,2)):(D=this.getCardinalDirection(-d,v,3),O=this.getCardinalDirection(-T,v,1)):t>r?(D=this.getCardinalDirection(-d,v,1),O=this.getCardinalDirection(-T,v,3)):(D=this.getCardinalDirection(d,v,2),O=this.getCardinalDirection(T,v,4)),!l)switch(D){case 1:F=o,P=f+-A/v,n[0]=P,n[1]=F;break;case 2:P=p,F=t+y*v,n[0]=P,n[1]=F;break;case 3:F=N,P=f+A/v,n[0]=P,n[1]=F;break;case 4:P=h,F=t+-y*v,n[0]=P,n[1]=F;break}if(!E)switch(O){case 1:Z=C,I=u+-k/v,n[2]=I,n[3]=Z;break;case 2:I=Q,Z=r+x*v,n[2]=I,n[3]=Z;break;case 3:Z=Y,I=u+k/v,n[2]=I,n[3]=Z;break;case 4:I=V,Z=r+-x*v,n[2]=I,n[3]=Z;break}}return!1},s.getCardinalDirection=function(a,i,n){return a>i?n:1+n%4},s.getIntersection=function(a,i,n,f){if(f==null)return this.getIntersection2(a,i,n);var t=a.x,u=a.y,r=i.x,e=i.y,o=n.x,c=n.y,h=f.x,N=f.y,p=void 0,y=void 0,A=void 0,R=void 0,C=void 0,S=void 0,V=void 0,Y=void 0,Q=void 0;return A=e-u,C=t-r,V=r*u-t*e,R=N-c,S=o-h,Y=h*c-o*N,Q=A*S-R*C,Q===0?null:(p=(C*Y-S*V)/Q,y=(R*V-A*Y)/Q,new g(p,y))},s.angleOfVector=function(a,i,n,f){var t=void 0;return a!==n?(t=Math.atan((f-i)/(n-a)),n<a?t+=Math.PI:f<i&&(t+=this.TWO_PI)):f<i?t=this.ONE_AND_HALF_PI:t=this.HALF_PI,t},s.doIntersect=function(a,i,n,f){var t=a.x,u=a.y,r=i.x,e=i.y,o=n.x,c=n.y,h=f.x,N=f.y,p=(r-t)*(N-c)-(h-o)*(e-u);if(p===0)return!1;var y=((N-c)*(h-t)+(o-h)*(N-u))/p,A=((u-e)*(h-t)+(r-t)*(N-u))/p;return 0<y&&y<1&&0<A&&A<1},s.findCircleLineIntersections=function(a,i,n,f,t,u,r){var e=(n-a)*(n-a)+(f-i)*(f-i),o=2*((a-t)*(n-a)+(i-u)*(f-i)),c=(a-t)*(a-t)+(i-u)*(i-u)-r*r,h=o*o-4*e*c;if(h>=0){var N=(-o+Math.sqrt(o*o-4*e*c))/(2*e),p=(-o-Math.sqrt(o*o-4*e*c))/(2*e),y=null;return N>=0&&N<=1?[N]:p>=0&&p<=1?[p]:y}else return null},s.HALF_PI=.5*Math.PI,s.ONE_AND_HALF_PI=1.5*Math.PI,s.TWO_PI=2*Math.PI,s.THREE_PI=3*Math.PI,m.exports=s},function(m,M,L){"use strict";function g(){}g.sign=function(s){return s>0?1:s<0?-1:0},g.floor=function(s){return s<0?Math.ceil(s):Math.floor(s)},g.ceil=function(s){return s<0?Math.floor(s):Math.ceil(s)},m.exports=g},function(m,M,L){"use strict";function g(){}g.MAX_VALUE=2147483647,g.MIN_VALUE=-2147483648,m.exports=g},function(m,M,L){"use strict";var g=function(){function t(u,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(u,o.key,o)}}return function(u,r,e){return r&&t(u.prototype,r),e&&t(u,e),u}}();function s(t,u){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}var a=function(u){return{value:u,next:null,prev:null}},i=function(u,r,e,o){return u!==null?u.next=r:o.head=r,e!==null?e.prev=r:o.tail=r,r.prev=u,r.next=e,o.length++,r},n=function(u,r){var e=u.prev,o=u.next;return e!==null?e.next=o:r.head=o,o!==null?o.prev=e:r.tail=e,u.prev=u.next=null,r.length--,u},f=function(){function t(u){var r=this;s(this,t),this.length=0,this.head=null,this.tail=null,u?.forEach(function(e){return r.push(e)})}return g(t,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(r,e){return i(e.prev,a(r),e,this)}},{key:"insertAfter",value:function(r,e){return i(e,a(r),e.next,this)}},{key:"insertNodeBefore",value:function(r,e){return i(e.prev,r,e,this)}},{key:"insertNodeAfter",value:function(r,e){return i(e,r,e.next,this)}},{key:"push",value:function(r){return i(this.tail,a(r),null,this)}},{key:"unshift",value:function(r){return i(null,a(r),this.head,this)}},{key:"remove",value:function(r){return n(r,this)}},{key:"pop",value:function(){return n(this.tail,this).value}},{key:"popNode",value:function(){return n(this.tail,this)}},{key:"shift",value:function(){return n(this.head,this).value}},{key:"shiftNode",value:function(){return n(this.head,this)}},{key:"get_object_at",value:function(r){if(r<=this.length()){for(var e=1,o=this.head;e<r;)o=o.next,e++;return o.value}}},{key:"set_object_at",value:function(r,e){if(r<=this.length()){for(var o=1,c=this.head;o<r;)c=c.next,o++;c.value=e}}}]),t}();m.exports=f},function(m,M,L){"use strict";function g(s,a,i){this.x=null,this.y=null,s==null&&a==null&&i==null?(this.x=0,this.y=0):typeof s=="number"&&typeof a=="number"&&i==null?(this.x=s,this.y=a):s.constructor.name=="Point"&&a==null&&i==null&&(i=s,this.x=i.x,this.y=i.y)}g.prototype.getX=function(){return this.x},g.prototype.getY=function(){return this.y},g.prototype.getLocation=function(){return new g(this.x,this.y)},g.prototype.setLocation=function(s,a,i){s.constructor.name=="Point"&&a==null&&i==null?(i=s,this.setLocation(i.x,i.y)):typeof s=="number"&&typeof a=="number"&&i==null&&(parseInt(s)==s&&parseInt(a)==a?this.move(s,a):(this.x=Math.floor(s+.5),this.y=Math.floor(a+.5)))},g.prototype.move=function(s,a){this.x=s,this.y=a},g.prototype.translate=function(s,a){this.x+=s,this.y+=a},g.prototype.equals=function(s){if(s.constructor.name=="Point"){var a=s;return this.x==a.x&&this.y==a.y}return this==s},g.prototype.toString=function(){return new g().constructor.name+"[x="+this.x+",y="+this.y+"]"},m.exports=g},function(m,M,L){"use strict";function g(s,a,i,n){this.x=0,this.y=0,this.width=0,this.height=0,s!=null&&a!=null&&i!=null&&n!=null&&(this.x=s,this.y=a,this.width=i,this.height=n)}g.prototype.getX=function(){return this.x},g.prototype.setX=function(s){this.x=s},g.prototype.getY=function(){return this.y},g.prototype.setY=function(s){this.y=s},g.prototype.getWidth=function(){return this.width},g.prototype.setWidth=function(s){this.width=s},g.prototype.getHeight=function(){return this.height},g.prototype.setHeight=function(s){this.height=s},g.prototype.getRight=function(){return this.x+this.width},g.prototype.getBottom=function(){return this.y+this.height},g.prototype.intersects=function(s){return!(this.getRight()<s.x||this.getBottom()<s.y||s.getRight()<this.x||s.getBottom()<this.y)},g.prototype.getCenterX=function(){return this.x+this.width/2},g.prototype.getMinX=function(){return this.getX()},g.prototype.getMaxX=function(){return this.getX()+this.width},g.prototype.getCenterY=function(){return this.y+this.height/2},g.prototype.getMinY=function(){return this.getY()},g.prototype.getMaxY=function(){return this.getY()+this.height},g.prototype.getWidthHalf=function(){return this.width/2},g.prototype.getHeightHalf=function(){return this.height/2},m.exports=g},function(m,M,L){"use strict";var g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function s(){}s.lastID=0,s.createID=function(a){return s.isPrimitive(a)?a:(a.uniqueID!=null||(a.uniqueID=s.getString(),s.lastID++),a.uniqueID)},s.getString=function(a){return a==null&&(a=s.lastID),"Object#"+a},s.isPrimitive=function(a){var i=typeof a>"u"?"undefined":g(a);return a==null||i!="object"&&i!="function"},m.exports=s},function(m,M,L){"use strict";function g(o){if(Array.isArray(o)){for(var c=0,h=Array(o.length);c<o.length;c++)h[c]=o[c];return h}else return Array.from(o)}var s=L(0),a=L(7),i=L(3),n=L(1),f=L(6),t=L(5),u=L(17),r=L(29);function e(o){r.call(this),this.layoutQuality=s.QUALITY,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=s.DEFAULT_INCREMENTAL,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new a(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,o!=null&&(this.isRemoteUse=o)}e.RANDOM_SEED=1,e.prototype=Object.create(r.prototype),e.prototype.getGraphManager=function(){return this.graphManager},e.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},e.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},e.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},e.prototype.newGraphManager=function(){var o=new a(this);return this.graphManager=o,o},e.prototype.newGraph=function(o){return new f(null,this.graphManager,o)},e.prototype.newNode=function(o){return new i(this.graphManager,o)},e.prototype.newEdge=function(o){return new n(null,null,o)},e.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},e.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var o;return this.checkLayoutSuccess()?o=!1:o=this.layout(),s.ANIMATE==="during"?!1:(o&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,o)},e.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},e.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var o,c=this.graphManager.getAllEdges(),h=0;h<c.length;h++)o=c[h];for(var N,p=this.graphManager.getRoot().getNodes(),h=0;h<p.length;h++)N=p[h];this.update(this.graphManager.getRoot())}},e.prototype.update=function(o){if(o==null)this.update2();else if(o instanceof i){var c=o;if(c.getChild()!=null)for(var h=c.getChild().getNodes(),N=0;N<h.length;N++)update(h[N]);if(c.vGraphObject!=null){var p=c.vGraphObject;p.update(c)}}else if(o instanceof n){var y=o;if(y.vGraphObject!=null){var A=y.vGraphObject;A.update(y)}}else if(o instanceof f){var R=o;if(R.vGraphObject!=null){var C=R.vGraphObject;C.update(R)}}},e.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=s.QUALITY,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=s.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},e.prototype.transform=function(o){if(o==null)this.transform(new t(0,0));else{var c=new u,h=this.graphManager.getRoot().updateLeftTop();if(h!=null){c.setWorldOrgX(o.x),c.setWorldOrgY(o.y),c.setDeviceOrgX(h.x),c.setDeviceOrgY(h.y);for(var N=this.getAllNodes(),p,y=0;y<N.length;y++)p=N[y],p.transform(c)}}},e.prototype.positionNodesRandomly=function(o){if(o==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var c,h,N=o.getNodes(),p=0;p<N.length;p++)c=N[p],h=c.getChild(),h==null||h.getNodes().length==0?c.scatter():(this.positionNodesRandomly(h),c.updateBounds())},e.prototype.getFlatForest=function(){for(var o=[],c=!0,h=this.graphManager.getRoot().getNodes(),N=!0,p=0;p<h.length;p++)h[p].getChild()!=null&&(N=!1);if(!N)return o;var y=new Set,A=[],R=new Map,C=[];for(C=C.concat(h);C.length>0&&c;){for(A.push(C[0]);A.length>0&&c;){var S=A[0];A.splice(0,1),y.add(S);for(var V=S.getEdges(),p=0;p<V.length;p++){var Y=V[p].getOtherEnd(S);if(R.get(S)!=Y)if(!y.has(Y))A.push(Y),R.set(Y,S);else{c=!1;break}}}if(!c)o=[];else{var Q=[].concat(g(y));o.push(Q);for(var p=0;p<Q.length;p++){var x=Q[p],k=C.indexOf(x);k>-1&&C.splice(k,1)}y=new Set,R=new Map}}return o},e.prototype.createDummyNodesForBendpoints=function(o){for(var c=[],h=o.source,N=this.graphManager.calcLowestCommonAncestor(o.source,o.target),p=0;p<o.bendpoints.length;p++){var y=this.newNode(null);y.setRect(new Point(0,0),new Dimension(1,1)),N.add(y);var A=this.newEdge(null);this.graphManager.add(A,h,y),c.add(y),h=y}var A=this.newEdge(null);return this.graphManager.add(A,h,o.target),this.edgeToDummyNodes.set(o,c),o.isInterGraph()?this.graphManager.remove(o):N.remove(o),c},e.prototype.createBendpointsFromDummyNodes=function(){var o=[];o=o.concat(this.graphManager.getAllEdges()),o=[].concat(g(this.edgeToDummyNodes.keys())).concat(o);for(var c=0;c<o.length;c++){var h=o[c];if(h.bendpoints.length>0){for(var N=this.edgeToDummyNodes.get(h),p=0;p<N.length;p++){var y=N[p],A=new t(y.getCenterX(),y.getCenterY()),R=h.bendpoints.get(p);R.x=A.x,R.y=A.y,y.getOwner().remove(y)}this.graphManager.add(h,h.source,h.target)}}},e.transform=function(o,c,h,N){if(h!=null&&N!=null){var p=c;if(o<=50){var y=c/h;p-=(c-y)/50*(50-o)}else{var A=c*N;p+=(A-c)/50*(o-50)}return p}else{var R,C;return o<=50?(R=9*c/500,C=c/10):(R=9*c/50,C=-8*c),R*o+C}},e.findCenterOfTree=function(o){var c=[];c=c.concat(o);var h=[],N=new Map,p=!1,y=null;(c.length==1||c.length==2)&&(p=!0,y=c[0]);for(var A=0;A<c.length;A++){var R=c[A],C=R.getNeighborsList().size;N.set(R,R.getNeighborsList().size),C==1&&h.push(R)}var S=[];for(S=S.concat(h);!p;){var V=[];V=V.concat(S),S=[];for(var A=0;A<c.length;A++){var R=c[A],Y=c.indexOf(R);Y>=0&&c.splice(Y,1);var Q=R.getNeighborsList();Q.forEach(function(l){if(h.indexOf(l)<0){var E=N.get(l),d=E-1;d==1&&S.push(l),N.set(l,d)}})}h=h.concat(S),(c.length==1||c.length==2)&&(p=!0,y=c[0])}return y},e.prototype.setGraphManager=function(o){this.graphManager=o},m.exports=e},function(m,M,L){"use strict";function g(){}g.seed=1,g.x=0,g.nextDouble=function(){return g.x=Math.sin(g.seed++)*1e4,g.x-Math.floor(g.x)},m.exports=g},function(m,M,L){"use strict";var g=L(5);function s(a,i){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}s.prototype.getWorldOrgX=function(){return this.lworldOrgX},s.prototype.setWorldOrgX=function(a){this.lworldOrgX=a},s.prototype.getWorldOrgY=function(){return this.lworldOrgY},s.prototype.setWorldOrgY=function(a){this.lworldOrgY=a},s.prototype.getWorldExtX=function(){return this.lworldExtX},s.prototype.setWorldExtX=function(a){this.lworldExtX=a},s.prototype.getWorldExtY=function(){return this.lworldExtY},s.prototype.setWorldExtY=function(a){this.lworldExtY=a},s.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},s.prototype.setDeviceOrgX=function(a){this.ldeviceOrgX=a},s.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},s.prototype.setDeviceOrgY=function(a){this.ldeviceOrgY=a},s.prototype.getDeviceExtX=function(){return this.ldeviceExtX},s.prototype.setDeviceExtX=function(a){this.ldeviceExtX=a},s.prototype.getDeviceExtY=function(){return this.ldeviceExtY},s.prototype.setDeviceExtY=function(a){this.ldeviceExtY=a},s.prototype.transformX=function(a){var i=0,n=this.lworldExtX;return n!=0&&(i=this.ldeviceOrgX+(a-this.lworldOrgX)*this.ldeviceExtX/n),i},s.prototype.transformY=function(a){var i=0,n=this.lworldExtY;return n!=0&&(i=this.ldeviceOrgY+(a-this.lworldOrgY)*this.ldeviceExtY/n),i},s.prototype.inverseTransformX=function(a){var i=0,n=this.ldeviceExtX;return n!=0&&(i=this.lworldOrgX+(a-this.ldeviceOrgX)*this.lworldExtX/n),i},s.prototype.inverseTransformY=function(a){var i=0,n=this.ldeviceExtY;return n!=0&&(i=this.lworldOrgY+(a-this.ldeviceOrgY)*this.lworldExtY/n),i},s.prototype.inverseTransformPoint=function(a){var i=new g(this.inverseTransformX(a.x),this.inverseTransformY(a.y));return i},m.exports=s},function(m,M,L){"use strict";function g(r){if(Array.isArray(r)){for(var e=0,o=Array(r.length);e<r.length;e++)o[e]=r[e];return o}else return Array.from(r)}var s=L(15),a=L(4),i=L(0),n=L(8),f=L(9);function t(){s.call(this),this.useSmartIdealEdgeLengthCalculation=a.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=a.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=a.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=a.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*a.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=a.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=a.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=a.MAX_ITERATIONS}t.prototype=Object.create(s.prototype);for(var u in s)t[u]=s[u];t.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=a.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},t.prototype.calcIdealEdgeLengths=function(){for(var r,e,o,c,h,N,p,y=this.getGraphManager().getAllEdges(),A=0;A<y.length;A++)r=y[A],e=r.idealLength,r.isInterGraph&&(c=r.getSource(),h=r.getTarget(),N=r.getSourceInLca().getEstimatedSize(),p=r.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(r.idealLength+=N+p-2*i.SIMPLE_NODE_SIZE),o=r.getLca().getInclusionTreeDepth(),r.idealLength+=e*a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(c.getInclusionTreeDepth()+h.getInclusionTreeDepth()-2*o))},t.prototype.initSpringEmbedder=function(){var r=this.getAllNodes().length;this.incremental?(r>a.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*a.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(r-a.ADAPTATION_LOWER_NODE_LIMIT)/(a.ADAPTATION_UPPER_NODE_LIMIT-a.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-a.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=a.MAX_NODE_DISPLACEMENT_INCREMENTAL):(r>a.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(a.COOLING_ADAPTATION_FACTOR,1-(r-a.ADAPTATION_LOWER_NODE_LIMIT)/(a.ADAPTATION_UPPER_NODE_LIMIT-a.ADAPTATION_LOWER_NODE_LIMIT)*(1-a.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=a.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*a.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},t.prototype.calcSpringForces=function(){for(var r=this.getAllEdges(),e,o=0;o<r.length;o++)e=r[o],this.calcSpringForce(e,e.idealLength)},t.prototype.calcRepulsionForces=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o,c,h,N,p=this.getAllNodes(),y;if(this.useFRGridVariant)for(this.totalIterations%a.GRID_CALCULATION_CHECK_PERIOD==1&&r&&this.updateGrid(),y=new Set,o=0;o<p.length;o++)h=p[o],this.calculateRepulsionForceOfANode(h,y,r,e),y.add(h);else for(o=0;o<p.length;o++)for(h=p[o],c=o+1;c<p.length;c++)N=p[c],h.getOwner()==N.getOwner()&&this.calcRepulsionForce(h,N)},t.prototype.calcGravitationalForces=function(){for(var r,e=this.getAllNodesToApplyGravitation(),o=0;o<e.length;o++)r=e[o],this.calcGravitationalForce(r)},t.prototype.moveNodes=function(){for(var r=this.getAllNodes(),e,o=0;o<r.length;o++)e=r[o],e.move()},t.prototype.calcSpringForce=function(r,e){var o=r.getSource(),c=r.getTarget(),h,N,p,y;if(this.uniformLeafNodeSizes&&o.getChild()==null&&c.getChild()==null)r.updateLengthSimple();else if(r.updateLength(),r.isOverlapingSourceAndTarget)return;h=r.getLength(),h!=0&&(N=r.edgeElasticity*(h-e),p=N*(r.lengthX/h),y=N*(r.lengthY/h),o.springForceX+=p,o.springForceY+=y,c.springForceX-=p,c.springForceY-=y)},t.prototype.calcRepulsionForce=function(r,e){var o=r.getRect(),c=e.getRect(),h=new Array(2),N=new Array(4),p,y,A,R,C,S,V;if(o.intersects(c)){n.calcSeparationAmount(o,c,h,a.DEFAULT_EDGE_LENGTH/2),S=2*h[0],V=2*h[1];var Y=r.noOfChildren*e.noOfChildren/(r.noOfChildren+e.noOfChildren);r.repulsionForceX-=Y*S,r.repulsionForceY-=Y*V,e.repulsionForceX+=Y*S,e.repulsionForceY+=Y*V}else this.uniformLeafNodeSizes&&r.getChild()==null&&e.getChild()==null?(p=c.getCenterX()-o.getCenterX(),y=c.getCenterY()-o.getCenterY()):(n.getIntersection(o,c,N),p=N[2]-N[0],y=N[3]-N[1]),Math.abs(p)<a.MIN_REPULSION_DIST&&(p=f.sign(p)*a.MIN_REPULSION_DIST),Math.abs(y)<a.MIN_REPULSION_DIST&&(y=f.sign(y)*a.MIN_REPULSION_DIST),A=p*p+y*y,R=Math.sqrt(A),C=(r.nodeRepulsion/2+e.nodeRepulsion/2)*r.noOfChildren*e.noOfChildren/A,S=C*p/R,V=C*y/R,r.repulsionForceX-=S,r.repulsionForceY-=V,e.repulsionForceX+=S,e.repulsionForceY+=V},t.prototype.calcGravitationalForce=function(r){var e,o,c,h,N,p,y,A;e=r.getOwner(),o=(e.getRight()+e.getLeft())/2,c=(e.getTop()+e.getBottom())/2,h=r.getCenterX()-o,N=r.getCenterY()-c,p=Math.abs(h)+r.getWidth()/2,y=Math.abs(N)+r.getHeight()/2,r.getOwner()==this.graphManager.getRoot()?(A=e.getEstimatedSize()*this.gravityRangeFactor,(p>A||y>A)&&(r.gravitationForceX=-this.gravityConstant*h,r.gravitationForceY=-this.gravityConstant*N)):(A=e.getEstimatedSize()*this.compoundGravityRangeFactor,(p>A||y>A)&&(r.gravitationForceX=-this.gravityConstant*h*this.compoundGravityConstant,r.gravitationForceY=-this.gravityConstant*N*this.compoundGravityConstant))},t.prototype.isConverged=function(){var r,e=!1;return this.totalIterations>this.maxIterations/3&&(e=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),r=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,r||e},t.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},t.prototype.calcNoOfChildrenForAllNodes=function(){for(var r,e=this.graphManager.getAllNodes(),o=0;o<e.length;o++)r=e[o],r.noOfChildren=r.getNoOfChildren()},t.prototype.calcGrid=function(r){var e=0,o=0;e=parseInt(Math.ceil((r.getRight()-r.getLeft())/this.repulsionRange)),o=parseInt(Math.ceil((r.getBottom()-r.getTop())/this.repulsionRange));for(var c=new Array(e),h=0;h<e;h++)c[h]=new Array(o);for(var h=0;h<e;h++)for(var N=0;N<o;N++)c[h][N]=new Array;return c},t.prototype.addNodeToGrid=function(r,e,o){var c=0,h=0,N=0,p=0;c=parseInt(Math.floor((r.getRect().x-e)/this.repulsionRange)),h=parseInt(Math.floor((r.getRect().width+r.getRect().x-e)/this.repulsionRange)),N=parseInt(Math.floor((r.getRect().y-o)/this.repulsionRange)),p=parseInt(Math.floor((r.getRect().height+r.getRect().y-o)/this.repulsionRange));for(var y=c;y<=h;y++)for(var A=N;A<=p;A++)this.grid[y][A].push(r),r.setGridCoordinates(c,h,N,p)},t.prototype.updateGrid=function(){var r,e,o=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),r=0;r<o.length;r++)e=o[r],this.addNodeToGrid(e,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},t.prototype.calculateRepulsionForceOfANode=function(r,e,o,c){if(this.totalIterations%a.GRID_CALCULATION_CHECK_PERIOD==1&&o||c){var h=new Set;r.surrounding=new Array;for(var N,p=this.grid,y=r.startX-1;y<r.finishX+2;y++)for(var A=r.startY-1;A<r.finishY+2;A++)if(!(y<0||A<0||y>=p.length||A>=p[0].length)){for(var R=0;R<p[y][A].length;R++)if(N=p[y][A][R],!(r.getOwner()!=N.getOwner()||r==N)&&!e.has(N)&&!h.has(N)){var C=Math.abs(r.getCenterX()-N.getCenterX())-(r.getWidth()/2+N.getWidth()/2),S=Math.abs(r.getCenterY()-N.getCenterY())-(r.getHeight()/2+N.getHeight()/2);C<=this.repulsionRange&&S<=this.repulsionRange&&h.add(N)}}r.surrounding=[].concat(g(h))}for(y=0;y<r.surrounding.length;y++)this.calcRepulsionForce(r,r.surrounding[y])},t.prototype.calcRepulsionRange=function(){return 0},m.exports=t},function(m,M,L){"use strict";var g=L(1),s=L(4);function a(n,f,t){g.call(this,n,f,t),this.idealLength=s.DEFAULT_EDGE_LENGTH,this.edgeElasticity=s.DEFAULT_SPRING_STRENGTH}a.prototype=Object.create(g.prototype);for(var i in g)a[i]=g[i];m.exports=a},function(m,M,L){"use strict";var g=L(3),s=L(4);function a(n,f,t,u){g.call(this,n,f,t,u),this.nodeRepulsion=s.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}a.prototype=Object.create(g.prototype);for(var i in g)a[i]=g[i];a.prototype.setGridCoordinates=function(n,f,t,u){this.startX=n,this.finishX=f,this.startY=t,this.finishY=u},m.exports=a},function(m,M,L){"use strict";function g(s,a){this.width=0,this.height=0,s!==null&&a!==null&&(this.height=a,this.width=s)}g.prototype.getWidth=function(){return this.width},g.prototype.setWidth=function(s){this.width=s},g.prototype.getHeight=function(){return this.height},g.prototype.setHeight=function(s){this.height=s},m.exports=g},function(m,M,L){"use strict";var g=L(14);function s(){this.map={},this.keys=[]}s.prototype.put=function(a,i){var n=g.createID(a);this.contains(n)||(this.map[n]=i,this.keys.push(a))},s.prototype.contains=function(a){var i=g.createID(a);return this.map[a]!=null},s.prototype.get=function(a){var i=g.createID(a);return this.map[i]},s.prototype.keySet=function(){return this.keys},m.exports=s},function(m,M,L){"use strict";var g=L(14);function s(){this.set={}}s.prototype.add=function(a){var i=g.createID(a);this.contains(i)||(this.set[i]=a)},s.prototype.remove=function(a){delete this.set[g.createID(a)]},s.prototype.clear=function(){this.set={}},s.prototype.contains=function(a){return this.set[g.createID(a)]==a},s.prototype.isEmpty=function(){return this.size()===0},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAllTo=function(a){for(var i=Object.keys(this.set),n=i.length,f=0;f<n;f++)a.push(this.set[i[f]])},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAll=function(a){for(var i=a.length,n=0;n<i;n++){var f=a[n];this.add(f)}},m.exports=s},function(m,M,L){"use strict";function g(){}g.multMat=function(s,a){for(var i=[],n=0;n<s.length;n++){i[n]=[];for(var f=0;f<a[0].length;f++){i[n][f]=0;for(var t=0;t<s[0].length;t++)i[n][f]+=s[n][t]*a[t][f]}}return i},g.transpose=function(s){for(var a=[],i=0;i<s[0].length;i++){a[i]=[];for(var n=0;n<s.length;n++)a[i][n]=s[n][i]}return a},g.multCons=function(s,a){for(var i=[],n=0;n<s.length;n++)i[n]=s[n]*a;return i},g.minusOp=function(s,a){for(var i=[],n=0;n<s.length;n++)i[n]=s[n]-a[n];return i},g.dotProduct=function(s,a){for(var i=0,n=0;n<s.length;n++)i+=s[n]*a[n];return i},g.mag=function(s){return Math.sqrt(this.dotProduct(s,s))},g.normalize=function(s){for(var a=[],i=this.mag(s),n=0;n<s.length;n++)a[n]=s[n]/i;return a},g.multGamma=function(s){for(var a=[],i=0,n=0;n<s.length;n++)i+=s[n];i*=-1/s.length;for(var f=0;f<s.length;f++)a[f]=i+s[f];return a},g.multL=function(s,a,i){for(var n=[],f=[],t=[],u=0;u<a[0].length;u++){for(var r=0,e=0;e<a.length;e++)r+=-.5*a[e][u]*s[e];f[u]=r}for(var o=0;o<i.length;o++){for(var c=0,h=0;h<i.length;h++)c+=i[o][h]*f[h];t[o]=c}for(var N=0;N<a.length;N++){for(var p=0,y=0;y<a[0].length;y++)p+=a[N][y]*t[y];n[N]=p}return n},m.exports=g},function(m,M,L){"use strict";var g=function(){function n(f,t){for(var u=0;u<t.length;u++){var r=t[u];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(f,r.key,r)}}return function(f,t,u){return t&&n(f.prototype,t),u&&n(f,u),f}}();function s(n,f){if(!(n instanceof f))throw new TypeError("Cannot call a class as a function")}var a=L(11),i=function(){function n(f,t){s(this,n),(t!==null||t!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var u=void 0;f instanceof a?u=f.size():u=f.length,this._quicksort(f,0,u-1)}return g(n,[{key:"_quicksort",value:function(t,u,r){if(u<r){var e=this._partition(t,u,r);this._quicksort(t,u,e),this._quicksort(t,e+1,r)}}},{key:"_partition",value:function(t,u,r){for(var e=this._get(t,u),o=u,c=r;;){for(;this.compareFunction(e,this._get(t,c));)c--;for(;this.compareFunction(this._get(t,o),e);)o++;if(o<c)this._swap(t,o,c),o++,c--;else return c}}},{key:"_get",value:function(t,u){return t instanceof a?t.get_object_at(u):t[u]}},{key:"_set",value:function(t,u,r){t instanceof a?t.set_object_at(u,r):t[u]=r}},{key:"_swap",value:function(t,u,r){var e=this._get(t,u);this._set(t,u,this._get(t,r)),this._set(t,r,e)}},{key:"_defaultCompareFunction",value:function(t,u){return u>t}}]),n}();m.exports=i},function(m,M,L){"use strict";function g(){}g.svd=function(s){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=s.length,this.n=s[0].length;var a=Math.min(this.m,this.n);this.s=function(xt){for(var Lt=[];xt-- >0;)Lt.push(0);return Lt}(Math.min(this.m+1,this.n)),this.U=function(xt){var Lt=function kt(St){if(St.length==0)return 0;for(var Wt=[],$t=0;$t<St[0];$t++)Wt.push(kt(St.slice(1)));return Wt};return Lt(xt)}([this.m,a]),this.V=function(xt){var Lt=function kt(St){if(St.length==0)return 0;for(var Wt=[],$t=0;$t<St[0];$t++)Wt.push(kt(St.slice(1)));return Wt};return Lt(xt)}([this.n,this.n]);for(var i=function(xt){for(var Lt=[];xt-- >0;)Lt.push(0);return Lt}(this.n),n=function(xt){for(var Lt=[];xt-- >0;)Lt.push(0);return Lt}(this.m),f=!0,t=!0,u=Math.min(this.m-1,this.n),r=Math.max(0,Math.min(this.n-2,this.m)),e=0;e<Math.max(u,r);e++){if(e<u){this.s[e]=0;for(var o=e;o<this.m;o++)this.s[e]=g.hypot(this.s[e],s[o][e]);if(this.s[e]!==0){s[e][e]<0&&(this.s[e]=-this.s[e]);for(var c=e;c<this.m;c++)s[c][e]/=this.s[e];s[e][e]+=1}this.s[e]=-this.s[e]}for(var h=e+1;h<this.n;h++){if(function(xt,Lt){return xt&&Lt}(e<u,this.s[e]!==0)){for(var N=0,p=e;p<this.m;p++)N+=s[p][e]*s[p][h];N=-N/s[e][e];for(var y=e;y<this.m;y++)s[y][h]+=N*s[y][e]}i[h]=s[e][h]}if(function(xt,Lt){return xt&&Lt}(f,e<u))for(var A=e;A<this.m;A++)this.U[A][e]=s[A][e];if(e<r){i[e]=0;for(var R=e+1;R<this.n;R++)i[e]=g.hypot(i[e],i[R]);if(i[e]!==0){i[e+1]<0&&(i[e]=-i[e]);for(var C=e+1;C<this.n;C++)i[C]/=i[e];i[e+1]+=1}if(i[e]=-i[e],function(xt,Lt){return xt&&Lt}(e+1<this.m,i[e]!==0)){for(var S=e+1;S<this.m;S++)n[S]=0;for(var V=e+1;V<this.n;V++)for(var Y=e+1;Y<this.m;Y++)n[Y]+=i[V]*s[Y][V];for(var Q=e+1;Q<this.n;Q++)for(var x=-i[Q]/i[e+1],k=e+1;k<this.m;k++)s[k][Q]+=x*n[k]}if(t)for(var l=e+1;l<this.n;l++)this.V[l][e]=i[l]}}var E=Math.min(this.n,this.m+1);if(u<this.n&&(this.s[u]=s[u][u]),this.m<E&&(this.s[E-1]=0),r+1<E&&(i[r]=s[r][E-1]),i[E-1]=0,f){for(var d=u;d<a;d++){for(var T=0;T<this.m;T++)this.U[T][d]=0;this.U[d][d]=1}for(var v=u-1;v>=0;v--)if(this.s[v]!==0){for(var D=v+1;D<a;D++){for(var O=0,P=v;P<this.m;P++)O+=this.U[P][v]*this.U[P][D];O=-O/this.U[v][v];for(var F=v;F<this.m;F++)this.U[F][D]+=O*this.U[F][v]}for(var I=v;I<this.m;I++)this.U[I][v]=-this.U[I][v];this.U[v][v]=1+this.U[v][v];for(var Z=0;Z<v-1;Z++)this.U[Z][v]=0}else{for(var tt=0;tt<this.m;tt++)this.U[tt][v]=0;this.U[v][v]=1}}if(t)for(var b=this.n-1;b>=0;b--){if(function(xt,Lt){return xt&&Lt}(b<r,i[b]!==0))for(var _=b+1;_<a;_++){for(var z=0,w=b+1;w<this.n;w++)z+=this.V[w][b]*this.V[w][_];z=-z/this.V[b+1][b];for(var U=b+1;U<this.n;U++)this.V[U][_]+=z*this.V[U][b]}for(var X=0;X<this.n;X++)this.V[X][b]=0;this.V[b][b]=1}for(var K=E-1,lt=0,At=Math.pow(2,-52),Ft=Math.pow(2,-966);E>0;){var J=void 0,Xt=void 0;for(J=E-2;J>=-1&&J!==-1;J--)if(Math.abs(i[J])<=Ft+At*(Math.abs(this.s[J])+Math.abs(this.s[J+1]))){i[J]=0;break}if(J===E-2)Xt=4;else{var Ot=void 0;for(Ot=E-1;Ot>=J&&Ot!==J;Ot--){var ot=(Ot!==E?Math.abs(i[Ot]):0)+(Ot!==J+1?Math.abs(i[Ot-1]):0);if(Math.abs(this.s[Ot])<=Ft+At*ot){this.s[Ot]=0;break}}Ot===J?Xt=3:Ot===E-1?Xt=1:(Xt=2,J=Ot)}switch(J++,Xt){case 1:{var et=i[E-2];i[E-2]=0;for(var yt=E-2;yt>=J;yt--){var mt=g.hypot(this.s[yt],et),Ct=this.s[yt]/mt,Tt=et/mt;if(this.s[yt]=mt,yt!==J&&(et=-Tt*i[yt-1],i[yt-1]=Ct*i[yt-1]),t)for(var Nt=0;Nt<this.n;Nt++)mt=Ct*this.V[Nt][yt]+Tt*this.V[Nt][E-1],this.V[Nt][E-1]=-Tt*this.V[Nt][yt]+Ct*this.V[Nt][E-1],this.V[Nt][yt]=mt}}break;case 2:{var Dt=i[J-1];i[J-1]=0;for(var Rt=J;Rt<E;Rt++){var zt=g.hypot(this.s[Rt],Dt),Gt=this.s[Rt]/zt,Ht=Dt/zt;if(this.s[Rt]=zt,Dt=-Ht*i[Rt],i[Rt]=Gt*i[Rt],f)for(var Pt=0;Pt<this.m;Pt++)zt=Gt*this.U[Pt][Rt]+Ht*this.U[Pt][J-1],this.U[Pt][J-1]=-Ht*this.U[Pt][Rt]+Gt*this.U[Pt][J-1],this.U[Pt][Rt]=zt}}break;case 3:{var G=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[E-1]),Math.abs(this.s[E-2])),Math.abs(i[E-2])),Math.abs(this.s[J])),Math.abs(i[J])),H=this.s[E-1]/G,W=this.s[E-2]/G,B=i[E-2]/G,$=this.s[J]/G,j=i[J]/G,gt=((W+H)*(W-H)+B*B)/2,ct=H*B*(H*B),q=0;(function(xt,Lt){return xt||Lt})(gt!==0,ct!==0)&&(q=Math.sqrt(gt*gt+ct),gt<0&&(q=-q),q=ct/(gt+q));for(var ht=($+H)*($-H)+q,ut=$*j,rt=J;rt<E-1;rt++){var vt=g.hypot(ht,ut),Mt=ht/vt,st=ut/vt;if(rt!==J&&(i[rt-1]=vt),ht=Mt*this.s[rt]+st*i[rt],i[rt]=Mt*i[rt]-st*this.s[rt],ut=st*this.s[rt+1],this.s[rt+1]=Mt*this.s[rt+1],t)for(var it=0;it<this.n;it++)vt=Mt*this.V[it][rt]+st*this.V[it][rt+1],this.V[it][rt+1]=-st*this.V[it][rt]+Mt*this.V[it][rt+1],this.V[it][rt]=vt;if(vt=g.hypot(ht,ut),Mt=ht/vt,st=ut/vt,this.s[rt]=vt,ht=Mt*i[rt]+st*this.s[rt+1],this.s[rt+1]=-st*i[rt]+Mt*this.s[rt+1],ut=st*i[rt+1],i[rt+1]=Mt*i[rt+1],f&&rt<this.m-1)for(var dt=0;dt<this.m;dt++)vt=Mt*this.U[dt][rt]+st*this.U[dt][rt+1],this.U[dt][rt+1]=-st*this.U[dt][rt]+Mt*this.U[dt][rt+1],this.U[dt][rt]=vt}i[E-2]=ht,lt=lt+1}break;case 4:{if(this.s[J]<=0&&(this.s[J]=this.s[J]<0?-this.s[J]:0,t))for(var nt=0;nt<=K;nt++)this.V[nt][J]=-this.V[nt][J];for(;J<K&&!(this.s[J]>=this.s[J+1]);){var ft=this.s[J];if(this.s[J]=this.s[J+1],this.s[J+1]=ft,t&&J<this.n-1)for(var bt=0;bt<this.n;bt++)ft=this.V[bt][J+1],this.V[bt][J+1]=this.V[bt][J],this.V[bt][J]=ft;if(f&&J<this.m-1)for(var It=0;It<this.m;It++)ft=this.U[It][J+1],this.U[It][J+1]=this.U[It][J],this.U[It][J]=ft;J++}lt=0,E--}break}}var Bt={U:this.U,V:this.V,S:this.s};return Bt},g.hypot=function(s,a){var i=void 0;return Math.abs(s)>Math.abs(a)?(i=a/s,i=Math.abs(s)*Math.sqrt(1+i*i)):a!=0?(i=s/a,i=Math.abs(a)*Math.sqrt(1+i*i)):i=0,i},m.exports=g},function(m,M,L){"use strict";var g=function(){function i(n,f){for(var t=0;t<f.length;t++){var u=f[t];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}return function(n,f,t){return f&&i(n.prototype,f),t&&i(n,t),n}}();function s(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}var a=function(){function i(n,f){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;s(this,i),this.sequence1=n,this.sequence2=f,this.match_score=t,this.mismatch_penalty=u,this.gap_penalty=r,this.iMax=n.length+1,this.jMax=f.length+1,this.grid=new Array(this.iMax);for(var e=0;e<this.iMax;e++){this.grid[e]=new Array(this.jMax);for(var o=0;o<this.jMax;o++)this.grid[e][o]=0}this.tracebackGrid=new Array(this.iMax);for(var c=0;c<this.iMax;c++){this.tracebackGrid[c]=new Array(this.jMax);for(var h=0;h<this.jMax;h++)this.tracebackGrid[c][h]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return g(i,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var f=1;f<this.jMax;f++)this.grid[0][f]=this.grid[0][f-1]+this.gap_penalty,this.tracebackGrid[0][f]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var u=1;u<this.iMax;u++)for(var r=1;r<this.jMax;r++){var e=void 0;this.sequence1[u-1]===this.sequence2[r-1]?e=this.grid[u-1][r-1]+this.match_score:e=this.grid[u-1][r-1]+this.mismatch_penalty;var o=this.grid[u-1][r]+this.gap_penalty,c=this.grid[u][r-1]+this.gap_penalty,h=[e,o,c],N=this.arrayAllMaxIndexes(h);this.grid[u][r]=h[N[0]],this.tracebackGrid[u][r]=[N.includes(0),N.includes(1),N.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var f=[];for(f.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});f[0];){var t=f[0],u=this.tracebackGrid[t.pos[0]][t.pos[1]];u[0]&&f.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),u[1]&&f.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),u[2]&&f.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),t.pos[0]===0&&t.pos[1]===0&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),f.shift()}return this.alignments}},{key:"getAllIndexes",value:function(f,t){for(var u=[],r=-1;(r=f.indexOf(t,r+1))!==-1;)u.push(r);return u}},{key:"arrayAllMaxIndexes",value:function(f){return this.getAllIndexes(f,Math.max.apply(null,f))}}]),i}();m.exports=a},function(m,M,L){"use strict";var g=function(){};g.FDLayout=L(18),g.FDLayoutConstants=L(4),g.FDLayoutEdge=L(19),g.FDLayoutNode=L(20),g.DimensionD=L(21),g.HashMap=L(22),g.HashSet=L(23),g.IGeometry=L(8),g.IMath=L(9),g.Integer=L(10),g.Point=L(12),g.PointD=L(5),g.RandomSeed=L(16),g.RectangleD=L(13),g.Transform=L(17),g.UniqueIDGeneretor=L(14),g.Quicksort=L(25),g.LinkedList=L(11),g.LGraphObject=L(2),g.LGraph=L(6),g.LEdge=L(1),g.LGraphManager=L(7),g.LNode=L(3),g.Layout=L(15),g.LayoutConstants=L(0),g.NeedlemanWunsch=L(27),g.Matrix=L(24),g.SVD=L(26),m.exports=g},function(m,M,L){"use strict";function g(){this.listeners=[]}var s=g.prototype;s.addListener=function(a,i){this.listeners.push({event:a,callback:i})},s.removeListener=function(a,i){for(var n=this.listeners.length;n>=0;n--){var f=this.listeners[n];f.event===a&&f.callback===i&&this.listeners.splice(n,1)}},s.emit=function(a,i){for(var n=0;n<this.listeners.length;n++){var f=this.listeners[n];a===f.event&&f.callback(i)}},m.exports=g}])})});var Me=me((oe,Ce)=>{(function(M,L){typeof oe=="object"&&typeof Ce=="object"?Ce.exports=L(Ae()):typeof define=="function"&&define.amd?define(["layout-base"],L):typeof oe=="object"?oe.coseBase=L(Ae()):M.coseBase=L(M.layoutBase)})(oe,function(m){return(()=>{"use strict";var M={45:(a,i,n)=>{var f={};f.layoutBase=n(551),f.CoSEConstants=n(806),f.CoSEEdge=n(767),f.CoSEGraph=n(880),f.CoSEGraphManager=n(578),f.CoSELayout=n(765),f.CoSENode=n(991),f.ConstraintHandler=n(902),a.exports=f},806:(a,i,n)=>{var f=n(551).FDLayoutConstants;function t(){}for(var u in f)t[u]=f[u];t.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,t.DEFAULT_RADIAL_SEPARATION=f.DEFAULT_EDGE_LENGTH,t.DEFAULT_COMPONENT_SEPERATION=60,t.TILE=!0,t.TILING_PADDING_VERTICAL=10,t.TILING_PADDING_HORIZONTAL=10,t.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,t.ENFORCE_CONSTRAINTS=!0,t.APPLY_LAYOUT=!0,t.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,t.TREE_REDUCTION_ON_INCREMENTAL=!0,t.PURE_INCREMENTAL=t.DEFAULT_INCREMENTAL,a.exports=t},767:(a,i,n)=>{var f=n(551).FDLayoutEdge;function t(r,e,o){f.call(this,r,e,o)}t.prototype=Object.create(f.prototype);for(var u in f)t[u]=f[u];a.exports=t},880:(a,i,n)=>{var f=n(551).LGraph;function t(r,e,o){f.call(this,r,e,o)}t.prototype=Object.create(f.prototype);for(var u in f)t[u]=f[u];a.exports=t},578:(a,i,n)=>{var f=n(551).LGraphManager;function t(r){f.call(this,r)}t.prototype=Object.create(f.prototype);for(var u in f)t[u]=f[u];a.exports=t},765:(a,i,n)=>{var f=n(551).FDLayout,t=n(578),u=n(880),r=n(991),e=n(767),o=n(806),c=n(902),h=n(551).FDLayoutConstants,N=n(551).LayoutConstants,p=n(551).Point,y=n(551).PointD,A=n(551).DimensionD,R=n(551).Layout,C=n(551).Integer,S=n(551).IGeometry,V=n(551).LGraph,Y=n(551).Transform,Q=n(551).LinkedList;function x(){f.call(this),this.toBeTiled={},this.constraints={}}x.prototype=Object.create(f.prototype);for(var k in f)x[k]=f[k];x.prototype.newGraphManager=function(){var l=new t(this);return this.graphManager=l,l},x.prototype.newGraph=function(l){return new u(null,this.graphManager,l)},x.prototype.newNode=function(l){return new r(this.graphManager,l)},x.prototype.newEdge=function(l){return new e(null,null,l)},x.prototype.initParameters=function(){f.prototype.initParameters.call(this,arguments),this.isSubLayout||(o.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=o.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},x.prototype.initSpringEmbedder=function(){f.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/h.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},x.prototype.layout=function(){var l=N.DEFAULT_CREATE_BENDS_AS_NEEDED;return l&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},x.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(o.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),d=this.nodesWithGravity.filter(function(D){return E.has(D)});this.graphManager.setAllNodesToApplyGravitation(d)}}else{var l=this.getFlatForest();if(l.length>0)this.positionNodesRadially(l);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),d=this.nodesWithGravity.filter(function(T){return E.has(T)});this.graphManager.setAllNodesToApplyGravitation(d),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(c.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),o.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},x.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var l=new Set(this.getAllNodes()),E=this.nodesWithGravity.filter(function(v){return l.has(v)});this.graphManager.setAllNodesToApplyGravitation(E),this.graphManager.updateBounds(),this.updateGrid(),o.PURE_INCREMENTAL?this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),o.PURE_INCREMENTAL?this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var d=!this.isTreeGrowing&&!this.isGrowthFinished,T=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(d,T),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},x.prototype.getPositionsData=function(){for(var l=this.graphManager.getAllNodes(),E={},d=0;d<l.length;d++){var T=l[d].rect,v=l[d].id;E[v]={id:v,x:T.getCenterX(),y:T.getCenterY(),w:T.width,h:T.height}}return E},x.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var l=!1;if(h.ANIMATE==="during")this.emit("layoutstarted");else{for(;!l;)l=this.tick();this.graphManager.updateBounds()}},x.prototype.moveNodes=function(){for(var l=this.getAllNodes(),E,d=0;d<l.length;d++)E=l[d],E.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var d=0;d<l.length;d++)E=l[d],E.move()},x.prototype.initConstraintVariables=function(){var l=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var E=this.graphManager.getAllNodes(),d=0;d<E.length;d++){var T=E[d];this.idToNodeMap.set(T.id,T)}var v=function w(U){for(var X=U.getChild().getNodes(),K,lt=0,At=0;At<X.length;At++)K=X[At],K.getChild()==null?l.fixedNodeSet.has(K.id)&&(lt+=100):lt+=w(K);return lt};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(X){l.fixedNodeSet.add(X.nodeId)});for(var E=this.graphManager.getAllNodes(),T,d=0;d<E.length;d++)if(T=E[d],T.getChild()!=null){var D=v(T);D>0&&(T.fixedNodeWeight=D)}}if(this.constraints.relativePlacementConstraint){var O=new Map,P=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(w){l.fixedNodesOnHorizontal.add(w),l.fixedNodesOnVertical.add(w)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var F=this.constraints.alignmentConstraint.vertical,d=0;d<F.length;d++)this.dummyToNodeForVerticalAlignment.set("dummy"+d,[]),F[d].forEach(function(U){O.set(U,"dummy"+d),l.dummyToNodeForVerticalAlignment.get("dummy"+d).push(U),l.fixedNodeSet.has(U)&&l.fixedNodesOnHorizontal.add("dummy"+d)});if(this.constraints.alignmentConstraint.horizontal)for(var I=this.constraints.alignmentConstraint.horizontal,d=0;d<I.length;d++)this.dummyToNodeForHorizontalAlignment.set("dummy"+d,[]),I[d].forEach(function(U){P.set(U,"dummy"+d),l.dummyToNodeForHorizontalAlignment.get("dummy"+d).push(U),l.fixedNodeSet.has(U)&&l.fixedNodesOnVertical.add("dummy"+d)})}if(o.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(w){var U,X,K;for(K=w.length-1;K>=2*w.length/3;K--)U=Math.floor(Math.random()*(K+1)),X=w[K],w[K]=w[U],w[U]=X;return w},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(w){if(w.left){var U=O.has(w.left)?O.get(w.left):w.left,X=O.has(w.right)?O.get(w.right):w.right;l.nodesInRelativeHorizontal.includes(U)||(l.nodesInRelativeHorizontal.push(U),l.nodeToRelativeConstraintMapHorizontal.set(U,[]),l.dummyToNodeForVerticalAlignment.has(U)?l.nodeToTempPositionMapHorizontal.set(U,l.idToNodeMap.get(l.dummyToNodeForVerticalAlignment.get(U)[0]).getCenterX()):l.nodeToTempPositionMapHorizontal.set(U,l.idToNodeMap.get(U).getCenterX())),l.nodesInRelativeHorizontal.includes(X)||(l.nodesInRelativeHorizontal.push(X),l.nodeToRelativeConstraintMapHorizontal.set(X,[]),l.dummyToNodeForVerticalAlignment.has(X)?l.nodeToTempPositionMapHorizontal.set(X,l.idToNodeMap.get(l.dummyToNodeForVerticalAlignment.get(X)[0]).getCenterX()):l.nodeToTempPositionMapHorizontal.set(X,l.idToNodeMap.get(X).getCenterX())),l.nodeToRelativeConstraintMapHorizontal.get(U).push({right:X,gap:w.gap}),l.nodeToRelativeConstraintMapHorizontal.get(X).push({left:U,gap:w.gap})}else{var K=P.has(w.top)?P.get(w.top):w.top,lt=P.has(w.bottom)?P.get(w.bottom):w.bottom;l.nodesInRelativeVertical.includes(K)||(l.nodesInRelativeVertical.push(K),l.nodeToRelativeConstraintMapVertical.set(K,[]),l.dummyToNodeForHorizontalAlignment.has(K)?l.nodeToTempPositionMapVertical.set(K,l.idToNodeMap.get(l.dummyToNodeForHorizontalAlignment.get(K)[0]).getCenterY()):l.nodeToTempPositionMapVertical.set(K,l.idToNodeMap.get(K).getCenterY())),l.nodesInRelativeVertical.includes(lt)||(l.nodesInRelativeVertical.push(lt),l.nodeToRelativeConstraintMapVertical.set(lt,[]),l.dummyToNodeForHorizontalAlignment.has(lt)?l.nodeToTempPositionMapVertical.set(lt,l.idToNodeMap.get(l.dummyToNodeForHorizontalAlignment.get(lt)[0]).getCenterY()):l.nodeToTempPositionMapVertical.set(lt,l.idToNodeMap.get(lt).getCenterY())),l.nodeToRelativeConstraintMapVertical.get(K).push({bottom:lt,gap:w.gap}),l.nodeToRelativeConstraintMapVertical.get(lt).push({top:K,gap:w.gap})}});else{var Z=new Map,tt=new Map;this.constraints.relativePlacementConstraint.forEach(function(w){if(w.left){var U=O.has(w.left)?O.get(w.left):w.left,X=O.has(w.right)?O.get(w.right):w.right;Z.has(U)?Z.get(U).push(X):Z.set(U,[X]),Z.has(X)?Z.get(X).push(U):Z.set(X,[U])}else{var K=P.has(w.top)?P.get(w.top):w.top,lt=P.has(w.bottom)?P.get(w.bottom):w.bottom;tt.has(K)?tt.get(K).push(lt):tt.set(K,[lt]),tt.has(lt)?tt.get(lt).push(K):tt.set(lt,[K])}});var b=function(U,X){var K=[],lt=[],At=new Q,Ft=new Set,J=0;return U.forEach(function(Xt,Ot){if(!Ft.has(Ot)){K[J]=[],lt[J]=!1;var ot=Ot;for(At.push(ot),Ft.add(ot),K[J].push(ot);At.length!=0;){ot=At.shift(),X.has(ot)&&(lt[J]=!0);var et=U.get(ot);et.forEach(function(yt){Ft.has(yt)||(At.push(yt),Ft.add(yt),K[J].push(yt))})}J++}}),{components:K,isFixed:lt}},_=b(Z,l.fixedNodesOnHorizontal);this.componentsOnHorizontal=_.components,this.fixedComponentsOnHorizontal=_.isFixed;var z=b(tt,l.fixedNodesOnVertical);this.componentsOnVertical=z.components,this.fixedComponentsOnVertical=z.isFixed}}},x.prototype.updateDisplacements=function(){var l=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(z){var w=l.idToNodeMap.get(z.nodeId);w.displacementX=0,w.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var E=this.constraints.alignmentConstraint.vertical,d=0;d<E.length;d++){for(var T=0,v=0;v<E[d].length;v++){if(this.fixedNodeSet.has(E[d][v])){T=0;break}T+=this.idToNodeMap.get(E[d][v]).displacementX}for(var D=T/E[d].length,v=0;v<E[d].length;v++)this.idToNodeMap.get(E[d][v]).displacementX=D}if(this.constraints.alignmentConstraint.horizontal)for(var O=this.constraints.alignmentConstraint.horizontal,d=0;d<O.length;d++){for(var P=0,v=0;v<O[d].length;v++){if(this.fixedNodeSet.has(O[d][v])){P=0;break}P+=this.idToNodeMap.get(O[d][v]).displacementY}for(var F=P/O[d].length,v=0;v<O[d].length;v++)this.idToNodeMap.get(O[d][v]).displacementY=F}}if(this.constraints.relativePlacementConstraint)if(o.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(z){if(!l.fixedNodesOnHorizontal.has(z)){var w=0;l.dummyToNodeForVerticalAlignment.has(z)?w=l.idToNodeMap.get(l.dummyToNodeForVerticalAlignment.get(z)[0]).displacementX:w=l.idToNodeMap.get(z).displacementX,l.nodeToRelativeConstraintMapHorizontal.get(z).forEach(function(U){if(U.right){var X=l.nodeToTempPositionMapHorizontal.get(U.right)-l.nodeToTempPositionMapHorizontal.get(z)-w;X<U.gap&&(w-=U.gap-X)}else{var X=l.nodeToTempPositionMapHorizontal.get(z)-l.nodeToTempPositionMapHorizontal.get(U.left)+w;X<U.gap&&(w+=U.gap-X)}}),l.nodeToTempPositionMapHorizontal.set(z,l.nodeToTempPositionMapHorizontal.get(z)+w),l.dummyToNodeForVerticalAlignment.has(z)?l.dummyToNodeForVerticalAlignment.get(z).forEach(function(U){l.idToNodeMap.get(U).displacementX=w}):l.idToNodeMap.get(z).displacementX=w}}),this.nodesInRelativeVertical.forEach(function(z){if(!l.fixedNodesOnHorizontal.has(z)){var w=0;l.dummyToNodeForHorizontalAlignment.has(z)?w=l.idToNodeMap.get(l.dummyToNodeForHorizontalAlignment.get(z)[0]).displacementY:w=l.idToNodeMap.get(z).displacementY,l.nodeToRelativeConstraintMapVertical.get(z).forEach(function(U){if(U.bottom){var X=l.nodeToTempPositionMapVertical.get(U.bottom)-l.nodeToTempPositionMapVertical.get(z)-w;X<U.gap&&(w-=U.gap-X)}else{var X=l.nodeToTempPositionMapVertical.get(z)-l.nodeToTempPositionMapVertical.get(U.top)+w;X<U.gap&&(w+=U.gap-X)}}),l.nodeToTempPositionMapVertical.set(z,l.nodeToTempPositionMapVertical.get(z)+w),l.dummyToNodeForHorizontalAlignment.has(z)?l.dummyToNodeForHorizontalAlignment.get(z).forEach(function(U){l.idToNodeMap.get(U).displacementY=w}):l.idToNodeMap.get(z).displacementY=w}});else{for(var d=0;d<this.componentsOnHorizontal.length;d++){var I=this.componentsOnHorizontal[d];if(this.fixedComponentsOnHorizontal[d])for(var v=0;v<I.length;v++)this.dummyToNodeForVerticalAlignment.has(I[v])?this.dummyToNodeForVerticalAlignment.get(I[v]).forEach(function(U){l.idToNodeMap.get(U).displacementX=0}):this.idToNodeMap.get(I[v]).displacementX=0;else{for(var Z=0,tt=0,v=0;v<I.length;v++)if(this.dummyToNodeForVerticalAlignment.has(I[v])){var b=this.dummyToNodeForVerticalAlignment.get(I[v]);Z+=b.length*this.idToNodeMap.get(b[0]).displacementX,tt+=b.length}else Z+=this.idToNodeMap.get(I[v]).displacementX,tt++;for(var _=Z/tt,v=0;v<I.length;v++)this.dummyToNodeForVerticalAlignment.has(I[v])?this.dummyToNodeForVerticalAlignment.get(I[v]).forEach(function(U){l.idToNodeMap.get(U).displacementX=_}):this.idToNodeMap.get(I[v]).displacementX=_}}for(var d=0;d<this.componentsOnVertical.length;d++){var I=this.componentsOnVertical[d];if(this.fixedComponentsOnVertical[d])for(var v=0;v<I.length;v++)this.dummyToNodeForHorizontalAlignment.has(I[v])?this.dummyToNodeForHorizontalAlignment.get(I[v]).forEach(function(X){l.idToNodeMap.get(X).displacementY=0}):this.idToNodeMap.get(I[v]).displacementY=0;else{for(var Z=0,tt=0,v=0;v<I.length;v++)if(this.dummyToNodeForHorizontalAlignment.has(I[v])){var b=this.dummyToNodeForHorizontalAlignment.get(I[v]);Z+=b.length*this.idToNodeMap.get(b[0]).displacementY,tt+=b.length}else Z+=this.idToNodeMap.get(I[v]).displacementY,tt++;for(var _=Z/tt,v=0;v<I.length;v++)this.dummyToNodeForHorizontalAlignment.has(I[v])?this.dummyToNodeForHorizontalAlignment.get(I[v]).forEach(function(At){l.idToNodeMap.get(At).displacementY=_}):this.idToNodeMap.get(I[v]).displacementY=_}}}},x.prototype.calculateNodesToApplyGravitationTo=function(){var l=[],E,d=this.graphManager.getGraphs(),T=d.length,v;for(v=0;v<T;v++)E=d[v],E.updateConnected(),E.isConnected||(l=l.concat(E.getNodes()));return l},x.prototype.createBendpoints=function(){var l=[];l=l.concat(this.graphManager.getAllEdges());var E=new Set,d;for(d=0;d<l.length;d++){var T=l[d];if(!E.has(T)){var v=T.getSource(),D=T.getTarget();if(v==D)T.getBendpoints().push(new y),T.getBendpoints().push(new y),this.createDummyNodesForBendpoints(T),E.add(T);else{var O=[];if(O=O.concat(v.getEdgeListToNode(D)),O=O.concat(D.getEdgeListToNode(v)),!E.has(O[0])){if(O.length>1){var P;for(P=0;P<O.length;P++){var F=O[P];F.getBendpoints().push(new y),this.createDummyNodesForBendpoints(F)}}O.forEach(function(I){E.add(I)})}}}if(E.size==l.length)break}},x.prototype.positionNodesRadially=function(l){for(var E=new p(0,0),d=Math.ceil(Math.sqrt(l.length)),T=0,v=0,D=0,O=new y(0,0),P=0;P<l.length;P++){P%d==0&&(D=0,v=T,P!=0&&(v+=o.DEFAULT_COMPONENT_SEPERATION),T=0);var F=l[P],I=R.findCenterOfTree(F);E.x=D,E.y=v,O=x.radialLayout(F,I,E),O.y>T&&(T=Math.floor(O.y)),D=Math.floor(O.x+o.DEFAULT_COMPONENT_SEPERATION)}this.transform(new y(N.WORLD_CENTER_X-O.x/2,N.WORLD_CENTER_Y-O.y/2))},x.radialLayout=function(l,E,d){var T=Math.max(this.maxDiagonalInTree(l),o.DEFAULT_RADIAL_SEPARATION);x.branchRadialLayout(E,null,0,359,0,T);var v=V.calculateBounds(l),D=new Y;D.setDeviceOrgX(v.getMinX()),D.setDeviceOrgY(v.getMinY()),D.setWorldOrgX(d.x),D.setWorldOrgY(d.y);for(var O=0;O<l.length;O++){var P=l[O];P.transform(D)}var F=new y(v.getMaxX(),v.getMaxY());return D.inverseTransformPoint(F)},x.branchRadialLayout=function(l,E,d,T,v,D){var O=(T-d+1)/2;O<0&&(O+=180);var P=(O+d)%360,F=P*S.TWO_PI/360,I=Math.cos(F),Z=v*Math.cos(F),tt=v*Math.sin(F);l.setCenter(Z,tt);var b=[];b=b.concat(l.getEdges());var _=b.length;E!=null&&_--;for(var z=0,w=b.length,U,X=l.getEdgesBetween(E);X.length>1;){var K=X[0];X.splice(0,1);var lt=b.indexOf(K);lt>=0&&b.splice(lt,1),w--,_--}E!=null?U=(b.indexOf(X[0])+1)%w:U=0;for(var At=Math.abs(T-d)/_,Ft=U;z!=_;Ft=++Ft%w){var J=b[Ft].getOtherEnd(l);if(J!=E){var Xt=(d+z*At)%360,Ot=(Xt+At)%360;x.branchRadialLayout(J,l,Xt,Ot,v+D,D),z++}}},x.maxDiagonalInTree=function(l){for(var E=C.MIN_VALUE,d=0;d<l.length;d++){var T=l[d],v=T.getDiagonal();v>E&&(E=v)}return E},x.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},x.prototype.groupZeroDegreeMembers=function(){var l=this,E={};this.memberGroups={},this.idToDummyNode={};for(var d=[],T=this.graphManager.getAllNodes(),v=0;v<T.length;v++){var D=T[v],O=D.getParent();this.getNodeDegreeWithChildren(D)===0&&(O.id==null||!this.getToBeTiled(O))&&d.push(D)}for(var v=0;v<d.length;v++){var D=d[v],P=D.getParent().id;typeof E[P]>"u"&&(E[P]=[]),E[P]=E[P].concat(D)}Object.keys(E).forEach(function(F){if(E[F].length>1){var I="DummyCompound_"+F;l.memberGroups[I]=E[F];var Z=E[F][0].getParent(),tt=new r(l.graphManager);tt.id=I,tt.paddingLeft=Z.paddingLeft||0,tt.paddingRight=Z.paddingRight||0,tt.paddingBottom=Z.paddingBottom||0,tt.paddingTop=Z.paddingTop||0,l.idToDummyNode[I]=tt;var b=l.getGraphManager().add(l.newGraph(),tt),_=Z.getChild();_.add(tt);for(var z=0;z<E[F].length;z++){var w=E[F][z];_.remove(w),b.add(w)}}})},x.prototype.clearCompounds=function(){var l={},E={};this.performDFSOnCompounds();for(var d=0;d<this.compoundOrder.length;d++)E[this.compoundOrder[d].id]=this.compoundOrder[d],l[this.compoundOrder[d].id]=[].concat(this.compoundOrder[d].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[d].getChild()),this.compoundOrder[d].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(l,E)},x.prototype.clearZeroDegreeMembers=function(){var l=this,E=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(d){var T=l.idToDummyNode[d];if(E[d]=l.tileNodes(l.memberGroups[d],T.paddingLeft+T.paddingRight),T.rect.width=E[d].width,T.rect.height=E[d].height,T.setCenter(E[d].centerX,E[d].centerY),T.labelMarginLeft=0,T.labelMarginTop=0,o.NODE_DIMENSIONS_INCLUDE_LABELS){var v=T.rect.width,D=T.rect.height;T.labelWidth&&(T.labelPosHorizontal=="left"?(T.rect.x-=T.labelWidth,T.setWidth(v+T.labelWidth),T.labelMarginLeft=T.labelWidth):T.labelPosHorizontal=="center"&&T.labelWidth>v?(T.rect.x-=(T.labelWidth-v)/2,T.setWidth(T.labelWidth),T.labelMarginLeft=(T.labelWidth-v)/2):T.labelPosHorizontal=="right"&&T.setWidth(v+T.labelWidth)),T.labelHeight&&(T.labelPosVertical=="top"?(T.rect.y-=T.labelHeight,T.setHeight(D+T.labelHeight),T.labelMarginTop=T.labelHeight):T.labelPosVertical=="center"&&T.labelHeight>D?(T.rect.y-=(T.labelHeight-D)/2,T.setHeight(T.labelHeight),T.labelMarginTop=(T.labelHeight-D)/2):T.labelPosVertical=="bottom"&&T.setHeight(D+T.labelHeight))}})},x.prototype.repopulateCompounds=function(){for(var l=this.compoundOrder.length-1;l>=0;l--){var E=this.compoundOrder[l],d=E.id,T=E.paddingLeft,v=E.paddingTop,D=E.labelMarginLeft,O=E.labelMarginTop;this.adjustLocations(this.tiledMemberPack[d],E.rect.x,E.rect.y,T,v,D,O)}},x.prototype.repopulateZeroDegreeMembers=function(){var l=this,E=this.tiledZeroDegreePack;Object.keys(E).forEach(function(d){var T=l.idToDummyNode[d],v=T.paddingLeft,D=T.paddingTop,O=T.labelMarginLeft,P=T.labelMarginTop;l.adjustLocations(E[d],T.rect.x,T.rect.y,v,D,O,P)})},x.prototype.getToBeTiled=function(l){var E=l.id;if(this.toBeTiled[E]!=null)return this.toBeTiled[E];var d=l.getChild();if(d==null)return this.toBeTiled[E]=!1,!1;for(var T=d.getNodes(),v=0;v<T.length;v++){var D=T[v];if(this.getNodeDegree(D)>0)return this.toBeTiled[E]=!1,!1;if(D.getChild()==null){this.toBeTiled[D.id]=!1;continue}if(!this.getToBeTiled(D))return this.toBeTiled[E]=!1,!1}return this.toBeTiled[E]=!0,!0},x.prototype.getNodeDegree=function(l){for(var E=l.id,d=l.getEdges(),T=0,v=0;v<d.length;v++){var D=d[v];D.getSource().id!==D.getTarget().id&&(T=T+1)}return T},x.prototype.getNodeDegreeWithChildren=function(l){var E=this.getNodeDegree(l);if(l.getChild()==null)return E;for(var d=l.getChild().getNodes(),T=0;T<d.length;T++){var v=d[T];E+=this.getNodeDegreeWithChildren(v)}return E},x.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},x.prototype.fillCompexOrderByDFS=function(l){for(var E=0;E<l.length;E++){var d=l[E];d.getChild()!=null&&this.fillCompexOrderByDFS(d.getChild().getNodes()),this.getToBeTiled(d)&&this.compoundOrder.push(d)}},x.prototype.adjustLocations=function(l,E,d,T,v,D,O){E+=T+D,d+=v+O;for(var P=E,F=0;F<l.rows.length;F++){var I=l.rows[F];E=P;for(var Z=0,tt=0;tt<I.length;tt++){var b=I[tt];b.rect.x=E,b.rect.y=d,E+=b.rect.width+l.horizontalPadding,b.rect.height>Z&&(Z=b.rect.height)}d+=Z+l.verticalPadding}},x.prototype.tileCompoundMembers=function(l,E){var d=this;this.tiledMemberPack=[],Object.keys(l).forEach(function(T){var v=E[T];if(d.tiledMemberPack[T]=d.tileNodes(l[T],v.paddingLeft+v.paddingRight),v.rect.width=d.tiledMemberPack[T].width,v.rect.height=d.tiledMemberPack[T].height,v.setCenter(d.tiledMemberPack[T].centerX,d.tiledMemberPack[T].centerY),v.labelMarginLeft=0,v.labelMarginTop=0,o.NODE_DIMENSIONS_INCLUDE_LABELS){var D=v.rect.width,O=v.rect.height;v.labelWidth&&(v.labelPosHorizontal=="left"?(v.rect.x-=v.labelWidth,v.setWidth(D+v.labelWidth),v.labelMarginLeft=v.labelWidth):v.labelPosHorizontal=="center"&&v.labelWidth>D?(v.rect.x-=(v.labelWidth-D)/2,v.setWidth(v.labelWidth),v.labelMarginLeft=(v.labelWidth-D)/2):v.labelPosHorizontal=="right"&&v.setWidth(D+v.labelWidth)),v.labelHeight&&(v.labelPosVertical=="top"?(v.rect.y-=v.labelHeight,v.setHeight(O+v.labelHeight),v.labelMarginTop=v.labelHeight):v.labelPosVertical=="center"&&v.labelHeight>O?(v.rect.y-=(v.labelHeight-O)/2,v.setHeight(v.labelHeight),v.labelMarginTop=(v.labelHeight-O)/2):v.labelPosVertical=="bottom"&&v.setHeight(O+v.labelHeight))}})},x.prototype.tileNodes=function(l,E){var d=this.tileNodesByFavoringDim(l,E,!0),T=this.tileNodesByFavoringDim(l,E,!1),v=this.getOrgRatio(d),D=this.getOrgRatio(T),O;return D<v?O=T:O=d,O},x.prototype.getOrgRatio=function(l){var E=l.width,d=l.height,T=E/d;return T<1&&(T=1/T),T},x.prototype.calcIdealRowWidth=function(l,E){var d=o.TILING_PADDING_VERTICAL,T=o.TILING_PADDING_HORIZONTAL,v=l.length,D=0,O=0,P=0;l.forEach(function(z){D+=z.getWidth(),O+=z.getHeight(),z.getWidth()>P&&(P=z.getWidth())});var F=D/v,I=O/v,Z=Math.pow(d-T,2)+4*(F+T)*(I+d)*v,tt=(T-d+Math.sqrt(Z))/(2*(F+T)),b;E?(b=Math.ceil(tt),b==tt&&b++):b=Math.floor(tt);var _=b*(F+T)-T;return P>_&&(_=P),_+=T*2,_},x.prototype.tileNodesByFavoringDim=function(l,E,d){var T=o.TILING_PADDING_VERTICAL,v=o.TILING_PADDING_HORIZONTAL,D=o.TILING_COMPARE_BY,O={rows:[],rowWidth:[],rowHeight:[],width:0,height:E,verticalPadding:T,horizontalPadding:v,centerX:0,centerY:0};D&&(O.idealRowWidth=this.calcIdealRowWidth(l,d));var P=function(w){return w.rect.width*w.rect.height},F=function(w,U){return P(U)-P(w)};l.sort(function(z,w){var U=F;return O.idealRowWidth?(U=D,U(z.id,w.id)):U(z,w)});for(var I=0,Z=0,tt=0;tt<l.length;tt++){var b=l[tt];I+=b.getCenterX(),Z+=b.getCenterY()}O.centerX=I/l.length,O.centerY=Z/l.length;for(var tt=0;tt<l.length;tt++){var b=l[tt];if(O.rows.length==0)this.insertNodeToRow(O,b,0,E);else if(this.canAddHorizontal(O,b.rect.width,b.rect.height)){var _=O.rows.length-1;O.idealRowWidth||(_=this.getShortestRowIndex(O)),this.insertNodeToRow(O,b,_,E)}else this.insertNodeToRow(O,b,O.rows.length,E);this.shiftToLastRow(O)}return O},x.prototype.insertNodeToRow=function(l,E,d,T){var v=T;if(d==l.rows.length){var D=[];l.rows.push(D),l.rowWidth.push(v),l.rowHeight.push(0)}var O=l.rowWidth[d]+E.rect.width;l.rows[d].length>0&&(O+=l.horizontalPadding),l.rowWidth[d]=O,l.width<O&&(l.width=O);var P=E.rect.height;d>0&&(P+=l.verticalPadding);var F=0;P>l.rowHeight[d]&&(F=l.rowHeight[d],l.rowHeight[d]=P,F=l.rowHeight[d]-F),l.height+=F,l.rows[d].push(E)},x.prototype.getShortestRowIndex=function(l){for(var E=-1,d=Number.MAX_VALUE,T=0;T<l.rows.length;T++)l.rowWidth[T]<d&&(E=T,d=l.rowWidth[T]);return E},x.prototype.getLongestRowIndex=function(l){for(var E=-1,d=Number.MIN_VALUE,T=0;T<l.rows.length;T++)l.rowWidth[T]>d&&(E=T,d=l.rowWidth[T]);return E},x.prototype.canAddHorizontal=function(l,E,d){if(l.idealRowWidth){var T=l.rows.length-1,v=l.rowWidth[T];return v+E+l.horizontalPadding<=l.idealRowWidth}var D=this.getShortestRowIndex(l);if(D<0)return!0;var O=l.rowWidth[D];if(O+l.horizontalPadding+E<=l.width)return!0;var P=0;l.rowHeight[D]<d&&D>0&&(P=d+l.verticalPadding-l.rowHeight[D]);var F;l.width-O>=E+l.horizontalPadding?F=(l.height+P)/(O+E+l.horizontalPadding):F=(l.height+P)/l.width,P=d+l.verticalPadding;var I;return l.width<E?I=(l.height+P)/E:I=(l.height+P)/l.width,I<1&&(I=1/I),F<1&&(F=1/F),F<I},x.prototype.shiftToLastRow=function(l){var E=this.getLongestRowIndex(l),d=l.rowWidth.length-1,T=l.rows[E],v=T[T.length-1],D=v.width+l.horizontalPadding;if(l.width-l.rowWidth[d]>D&&E!=d){T.splice(-1,1),l.rows[d].push(v),l.rowWidth[E]=l.rowWidth[E]-D,l.rowWidth[d]=l.rowWidth[d]+D,l.width=l.rowWidth[instance.getLongestRowIndex(l)];for(var O=Number.MIN_VALUE,P=0;P<T.length;P++)T[P].height>O&&(O=T[P].height);E>0&&(O+=l.verticalPadding);var F=l.rowHeight[E]+l.rowHeight[d];l.rowHeight[E]=O,l.rowHeight[d]<v.height+l.verticalPadding&&(l.rowHeight[d]=v.height+l.verticalPadding);var I=l.rowHeight[E]+l.rowHeight[d];l.height+=I-F,this.shiftToLastRow(l)}},x.prototype.tilingPreLayout=function(){o.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},x.prototype.tilingPostLayout=function(){o.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},x.prototype.reduceTrees=function(){for(var l=[],E=!0,d;E;){var T=this.graphManager.getAllNodes(),v=[];E=!1;for(var D=0;D<T.length;D++)if(d=T[D],d.getEdges().length==1&&!d.getEdges()[0].isInterGraph&&d.getChild()==null){if(o.PURE_INCREMENTAL){var O=d.getEdges()[0].getOtherEnd(d),P=new A(d.getCenterX()-O.getCenterX(),d.getCenterY()-O.getCenterY());v.push([d,d.getEdges()[0],d.getOwner(),P])}else v.push([d,d.getEdges()[0],d.getOwner()]);E=!0}if(E==!0){for(var F=[],I=0;I<v.length;I++)v[I][0].getEdges().length==1&&(F.push(v[I]),v[I][0].getOwner().remove(v[I][0]));l.push(F),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=l},x.prototype.growTree=function(l){for(var E=l.length,d=l[E-1],T,v=0;v<d.length;v++)T=d[v],this.findPlaceforPrunedNode(T),T[2].add(T[0]),T[2].add(T[1],T[1].source,T[1].target);l.splice(l.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},x.prototype.findPlaceforPrunedNode=function(l){var E,d,T=l[0];if(T==l[1].source?d=l[1].target:d=l[1].source,o.PURE_INCREMENTAL)T.setCenter(d.getCenterX()+l[3].getWidth(),d.getCenterY()+l[3].getHeight());else{var v=d.startX,D=d.finishX,O=d.startY,P=d.finishY,F=0,I=0,Z=0,tt=0,b=[F,Z,I,tt];if(O>0)for(var _=v;_<=D;_++)b[0]+=this.grid[_][O-1].length+this.grid[_][O].length-1;if(D<this.grid.length-1)for(var _=O;_<=P;_++)b[1]+=this.grid[D+1][_].length+this.grid[D][_].length-1;if(P<this.grid[0].length-1)for(var _=v;_<=D;_++)b[2]+=this.grid[_][P+1].length+this.grid[_][P].length-1;if(v>0)for(var _=O;_<=P;_++)b[3]+=this.grid[v-1][_].length+this.grid[v][_].length-1;for(var z=C.MAX_VALUE,w,U,X=0;X<b.length;X++)b[X]<z?(z=b[X],w=1,U=X):b[X]==z&&w++;if(w==3&&z==0)b[0]==0&&b[1]==0&&b[2]==0?E=1:b[0]==0&&b[1]==0&&b[3]==0?E=0:b[0]==0&&b[2]==0&&b[3]==0?E=3:b[1]==0&&b[2]==0&&b[3]==0&&(E=2);else if(w==2&&z==0){var K=Math.floor(Math.random()*2);b[0]==0&&b[1]==0?K==0?E=0:E=1:b[0]==0&&b[2]==0?K==0?E=0:E=2:b[0]==0&&b[3]==0?K==0?E=0:E=3:b[1]==0&&b[2]==0?K==0?E=1:E=2:b[1]==0&&b[3]==0?K==0?E=1:E=3:K==0?E=2:E=3}else if(w==4&&z==0){var K=Math.floor(Math.random()*4);E=K}else E=U;E==0?T.setCenter(d.getCenterX(),d.getCenterY()-d.getHeight()/2-h.DEFAULT_EDGE_LENGTH-T.getHeight()/2):E==1?T.setCenter(d.getCenterX()+d.getWidth()/2+h.DEFAULT_EDGE_LENGTH+T.getWidth()/2,d.getCenterY()):E==2?T.setCenter(d.getCenterX(),d.getCenterY()+d.getHeight()/2+h.DEFAULT_EDGE_LENGTH+T.getHeight()/2):T.setCenter(d.getCenterX()-d.getWidth()/2-h.DEFAULT_EDGE_LENGTH-T.getWidth()/2,d.getCenterY())}},a.exports=x},991:(a,i,n)=>{var f=n(551).FDLayoutNode,t=n(551).IMath;function u(e,o,c,h){f.call(this,e,o,c,h)}u.prototype=Object.create(f.prototype);for(var r in f)u[r]=f[r];u.prototype.calculateDisplacement=function(){var e=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*t.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*t.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},u.prototype.propogateDisplacementToChildren=function(e,o){for(var c=this.getChild().getNodes(),h,N=0;N<c.length;N++)h=c[N],h.getChild()==null?(h.displacementX+=e,h.displacementY+=o):h.propogateDisplacementToChildren(e,o)},u.prototype.move=function(){var e=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},u.prototype.setPred1=function(e){this.pred1=e},u.prototype.getPred1=function(){return pred1},u.prototype.getPred2=function(){return pred2},u.prototype.setNext=function(e){this.next=e},u.prototype.getNext=function(){return next},u.prototype.setProcessed=function(e){this.processed=e},u.prototype.isProcessed=function(){return processed},a.exports=u},902:(a,i,n)=>{function f(c){if(Array.isArray(c)){for(var h=0,N=Array(c.length);h<c.length;h++)N[h]=c[h];return N}else return Array.from(c)}var t=n(806),u=n(551).LinkedList,r=n(551).Matrix,e=n(551).SVD;function o(){}o.handleConstraints=function(c){var h={};h.fixedNodeConstraint=c.constraints.fixedNodeConstraint,h.alignmentConstraint=c.constraints.alignmentConstraint,h.relativePlacementConstraint=c.constraints.relativePlacementConstraint;for(var N=new Map,p=new Map,y=[],A=[],R=c.getAllNodes(),C=0,S=0;S<R.length;S++){var V=R[S];V.getChild()==null&&(p.set(V.id,C++),y.push(V.getCenterX()),A.push(V.getCenterY()),N.set(V.id,V))}h.relativePlacementConstraint&&h.relativePlacementConstraint.forEach(function(G){!G.gap&&G.gap!=0&&(G.left?G.gap=t.DEFAULT_EDGE_LENGTH+N.get(G.left).getWidth()/2+N.get(G.right).getWidth()/2:G.gap=t.DEFAULT_EDGE_LENGTH+N.get(G.top).getHeight()/2+N.get(G.bottom).getHeight()/2)});var Y=function(H,W){return{x:H.x-W.x,y:H.y-W.y}},Q=function(H){var W=0,B=0;return H.forEach(function($){W+=y[p.get($)],B+=A[p.get($)]}),{x:W/H.size,y:B/H.size}},x=function(H,W,B,$,j){function gt(st,it){var dt=new Set(st),nt=!0,ft=!1,bt=void 0;try{for(var It=it[Symbol.iterator](),Bt;!(nt=(Bt=It.next()).done);nt=!0){var xt=Bt.value;dt.add(xt)}}catch(Lt){ft=!0,bt=Lt}finally{try{!nt&&It.return&&It.return()}finally{if(ft)throw bt}}return dt}var ct=new Map;H.forEach(function(st,it){ct.set(it,0)}),H.forEach(function(st,it){st.forEach(function(dt){ct.set(dt.id,ct.get(dt.id)+1)})});var q=new Map,ht=new Map,ut=new u;ct.forEach(function(st,it){st==0?(ut.push(it),B||(W=="horizontal"?q.set(it,p.has(it)?y[p.get(it)]:$.get(it)):q.set(it,p.has(it)?A[p.get(it)]:$.get(it)))):q.set(it,Number.NEGATIVE_INFINITY),B&&ht.set(it,new Set([it]))}),B&&j.forEach(function(st){var it=[];if(st.forEach(function(ft){B.has(ft)&&it.push(ft)}),it.length>0){var dt=0;it.forEach(function(ft){W=="horizontal"?(q.set(ft,p.has(ft)?y[p.get(ft)]:$.get(ft)),dt+=q.get(ft)):(q.set(ft,p.has(ft)?A[p.get(ft)]:$.get(ft)),dt+=q.get(ft))}),dt=dt/it.length,st.forEach(function(ft){B.has(ft)||q.set(ft,dt)})}else{var nt=0;st.forEach(function(ft){W=="horizontal"?nt+=p.has(ft)?y[p.get(ft)]:$.get(ft):nt+=p.has(ft)?A[p.get(ft)]:$.get(ft)}),nt=nt/st.length,st.forEach(function(ft){q.set(ft,nt)})}});for(var rt=function(){var it=ut.shift(),dt=H.get(it);dt.forEach(function(nt){if(q.get(nt.id)<q.get(it)+nt.gap)if(B&&B.has(nt.id)){var ft=void 0;if(W=="horizontal"?ft=p.has(nt.id)?y[p.get(nt.id)]:$.get(nt.id):ft=p.has(nt.id)?A[p.get(nt.id)]:$.get(nt.id),q.set(nt.id,ft),ft<q.get(it)+nt.gap){var bt=q.get(it)+nt.gap-ft;ht.get(it).forEach(function(It){q.set(It,q.get(It)-bt)})}}else q.set(nt.id,q.get(it)+nt.gap);ct.set(nt.id,ct.get(nt.id)-1),ct.get(nt.id)==0&&ut.push(nt.id),B&&ht.set(nt.id,gt(ht.get(it),ht.get(nt.id)))})};ut.length!=0;)rt();if(B){var vt=new Set;H.forEach(function(st,it){st.length==0&&vt.add(it)});var Mt=[];ht.forEach(function(st,it){if(vt.has(it)){var dt=!1,nt=!0,ft=!1,bt=void 0;try{for(var It=st[Symbol.iterator](),Bt;!(nt=(Bt=It.next()).done);nt=!0){var xt=Bt.value;B.has(xt)&&(dt=!0)}}catch(St){ft=!0,bt=St}finally{try{!nt&&It.return&&It.return()}finally{if(ft)throw bt}}if(!dt){var Lt=!1,kt=void 0;Mt.forEach(function(St,Wt){St.has([].concat(f(st))[0])&&(Lt=!0,kt=Wt)}),Lt?st.forEach(function(St){Mt[kt].add(St)}):Mt.push(new Set(st))}}}),Mt.forEach(function(st,it){var dt=Number.POSITIVE_INFINITY,nt=Number.POSITIVE_INFINITY,ft=Number.NEGATIVE_INFINITY,bt=Number.NEGATIVE_INFINITY,It=!0,Bt=!1,xt=void 0;try{for(var Lt=st[Symbol.iterator](),kt;!(It=(kt=Lt.next()).done);It=!0){var St=kt.value,Wt=void 0;W=="horizontal"?Wt=p.has(St)?y[p.get(St)]:$.get(St):Wt=p.has(St)?A[p.get(St)]:$.get(St);var $t=q.get(St);Wt<dt&&(dt=Wt),Wt>ft&&(ft=Wt),$t<nt&&(nt=$t),$t>bt&&(bt=$t)}}catch(ee){Bt=!0,xt=ee}finally{try{!It&&Lt.return&&Lt.return()}finally{if(Bt)throw xt}}var de=(dt+ft)/2-(nt+bt)/2,Qt=!0,jt=!1,_t=void 0;try{for(var Kt=st[Symbol.iterator](),he;!(Qt=(he=Kt.next()).done);Qt=!0){var te=he.value;q.set(te,q.get(te)+de)}}catch(ee){jt=!0,_t=ee}finally{try{!Qt&&Kt.return&&Kt.return()}finally{if(jt)throw _t}}})}return q},k=function(H){var W=0,B=0,$=0,j=0;if(H.forEach(function(ht){ht.left?y[p.get(ht.left)]-y[p.get(ht.right)]>=0?W++:B++:A[p.get(ht.top)]-A[p.get(ht.bottom)]>=0?$++:j++}),W>B&&$>j)for(var gt=0;gt<p.size;gt++)y[gt]=-1*y[gt],A[gt]=-1*A[gt];else if(W>B)for(var ct=0;ct<p.size;ct++)y[ct]=-1*y[ct];else if($>j)for(var q=0;q<p.size;q++)A[q]=-1*A[q]},l=function(H){var W=[],B=new u,$=new Set,j=0;return H.forEach(function(gt,ct){if(!$.has(ct)){W[j]=[];var q=ct;for(B.push(q),$.add(q),W[j].push(q);B.length!=0;){q=B.shift();var ht=H.get(q);ht.forEach(function(ut){$.has(ut.id)||(B.push(ut.id),$.add(ut.id),W[j].push(ut.id))})}j++}}),W},E=function(H){var W=new Map;return H.forEach(function(B,$){W.set($,[])}),H.forEach(function(B,$){B.forEach(function(j){W.get($).push(j),W.get(j.id).push({id:$,gap:j.gap,direction:j.direction})})}),W},d=function(H){var W=new Map;return H.forEach(function(B,$){W.set($,[])}),H.forEach(function(B,$){B.forEach(function(j){W.get(j.id).push({id:$,gap:j.gap,direction:j.direction})})}),W},T=[],v=[],D=!1,O=!1,P=new Set,F=new Map,I=new Map,Z=[];if(h.fixedNodeConstraint&&h.fixedNodeConstraint.forEach(function(G){P.add(G.nodeId)}),h.relativePlacementConstraint&&(h.relativePlacementConstraint.forEach(function(G){G.left?(F.has(G.left)?F.get(G.left).push({id:G.right,gap:G.gap,direction:"horizontal"}):F.set(G.left,[{id:G.right,gap:G.gap,direction:"horizontal"}]),F.has(G.right)||F.set(G.right,[])):(F.has(G.top)?F.get(G.top).push({id:G.bottom,gap:G.gap,direction:"vertical"}):F.set(G.top,[{id:G.bottom,gap:G.gap,direction:"vertical"}]),F.has(G.bottom)||F.set(G.bottom,[]))}),I=E(F),Z=l(I)),t.TRANSFORM_ON_CONSTRAINT_HANDLING){if(h.fixedNodeConstraint&&h.fixedNodeConstraint.length>1)h.fixedNodeConstraint.forEach(function(G,H){T[H]=[G.position.x,G.position.y],v[H]=[y[p.get(G.nodeId)],A[p.get(G.nodeId)]]}),D=!0;else if(h.alignmentConstraint)(function(){var G=0;if(h.alignmentConstraint.vertical){for(var H=h.alignmentConstraint.vertical,W=function(q){var ht=new Set;H[q].forEach(function(vt){ht.add(vt)});var ut=new Set([].concat(f(ht)).filter(function(vt){return P.has(vt)})),rt=void 0;ut.size>0?rt=y[p.get(ut.values().next().value)]:rt=Q(ht).x,H[q].forEach(function(vt){T[G]=[rt,A[p.get(vt)]],v[G]=[y[p.get(vt)],A[p.get(vt)]],G++})},B=0;B<H.length;B++)W(B);D=!0}if(h.alignmentConstraint.horizontal){for(var $=h.alignmentConstraint.horizontal,j=function(q){var ht=new Set;$[q].forEach(function(vt){ht.add(vt)});var ut=new Set([].concat(f(ht)).filter(function(vt){return P.has(vt)})),rt=void 0;ut.size>0?rt=y[p.get(ut.values().next().value)]:rt=Q(ht).y,$[q].forEach(function(vt){T[G]=[y[p.get(vt)],rt],v[G]=[y[p.get(vt)],A[p.get(vt)]],G++})},gt=0;gt<$.length;gt++)j(gt);D=!0}h.relativePlacementConstraint&&(O=!0)})();else if(h.relativePlacementConstraint){for(var tt=0,b=0,_=0;_<Z.length;_++)Z[_].length>tt&&(tt=Z[_].length,b=_);if(tt<I.size/2)k(h.relativePlacementConstraint),D=!1,O=!1;else{var z=new Map,w=new Map,U=[];Z[b].forEach(function(G){F.get(G).forEach(function(H){H.direction=="horizontal"?(z.has(G)?z.get(G).push(H):z.set(G,[H]),z.has(H.id)||z.set(H.id,[]),U.push({left:G,right:H.id})):(w.has(G)?w.get(G).push(H):w.set(G,[H]),w.has(H.id)||w.set(H.id,[]),U.push({top:G,bottom:H.id}))})}),k(U),O=!1;var X=x(z,"horizontal"),K=x(w,"vertical");Z[b].forEach(function(G,H){v[H]=[y[p.get(G)],A[p.get(G)]],T[H]=[],X.has(G)?T[H][0]=X.get(G):T[H][0]=y[p.get(G)],K.has(G)?T[H][1]=K.get(G):T[H][1]=A[p.get(G)]}),D=!0}}if(D){for(var lt=void 0,At=r.transpose(T),Ft=r.transpose(v),J=0;J<At.length;J++)At[J]=r.multGamma(At[J]),Ft[J]=r.multGamma(Ft[J]);var Xt=r.multMat(At,r.transpose(Ft)),Ot=e.svd(Xt);lt=r.multMat(Ot.V,r.transpose(Ot.U));for(var ot=0;ot<p.size;ot++){var et=[y[ot],A[ot]],yt=[lt[0][0],lt[1][0]],mt=[lt[0][1],lt[1][1]];y[ot]=r.dotProduct(et,yt),A[ot]=r.dotProduct(et,mt)}O&&k(h.relativePlacementConstraint)}}if(t.ENFORCE_CONSTRAINTS){if(h.fixedNodeConstraint&&h.fixedNodeConstraint.length>0){var Ct={x:0,y:0};h.fixedNodeConstraint.forEach(function(G,H){var W={x:y[p.get(G.nodeId)],y:A[p.get(G.nodeId)]},B=G.position,$=Y(B,W);Ct.x+=$.x,Ct.y+=$.y}),Ct.x/=h.fixedNodeConstraint.length,Ct.y/=h.fixedNodeConstraint.length,y.forEach(function(G,H){y[H]+=Ct.x}),A.forEach(function(G,H){A[H]+=Ct.y}),h.fixedNodeConstraint.forEach(function(G){y[p.get(G.nodeId)]=G.position.x,A[p.get(G.nodeId)]=G.position.y})}if(h.alignmentConstraint){if(h.alignmentConstraint.vertical)for(var Tt=h.alignmentConstraint.vertical,Nt=function(H){var W=new Set;Tt[H].forEach(function(j){W.add(j)});var B=new Set([].concat(f(W)).filter(function(j){return P.has(j)})),$=void 0;B.size>0?$=y[p.get(B.values().next().value)]:$=Q(W).x,W.forEach(function(j){P.has(j)||(y[p.get(j)]=$)})},Dt=0;Dt<Tt.length;Dt++)Nt(Dt);if(h.alignmentConstraint.horizontal)for(var Rt=h.alignmentConstraint.horizontal,zt=function(H){var W=new Set;Rt[H].forEach(function(j){W.add(j)});var B=new Set([].concat(f(W)).filter(function(j){return P.has(j)})),$=void 0;B.size>0?$=A[p.get(B.values().next().value)]:$=Q(W).y,W.forEach(function(j){P.has(j)||(A[p.get(j)]=$)})},Gt=0;Gt<Rt.length;Gt++)zt(Gt)}h.relativePlacementConstraint&&function(){var G=new Map,H=new Map,W=new Map,B=new Map,$=new Map,j=new Map,gt=new Set,ct=new Set;if(P.forEach(function(Yt){gt.add(Yt),ct.add(Yt)}),h.alignmentConstraint){if(h.alignmentConstraint.vertical)for(var q=h.alignmentConstraint.vertical,ht=function(Et){W.set("dummy"+Et,[]),q[Et].forEach(function(wt){G.set(wt,"dummy"+Et),W.get("dummy"+Et).push(wt),P.has(wt)&&gt.add("dummy"+Et)}),$.set("dummy"+Et,y[p.get(q[Et][0])])},ut=0;ut<q.length;ut++)ht(ut);if(h.alignmentConstraint.horizontal)for(var rt=h.alignmentConstraint.horizontal,vt=function(Et){B.set("dummy"+Et,[]),rt[Et].forEach(function(wt){H.set(wt,"dummy"+Et),B.get("dummy"+Et).push(wt),P.has(wt)&&ct.add("dummy"+Et)}),j.set("dummy"+Et,A[p.get(rt[Et][0])])},Mt=0;Mt<rt.length;Mt++)vt(Mt)}var st=new Map,it=new Map,dt=function(Et){F.get(Et).forEach(function(wt){var qt=void 0,Zt=void 0;wt.direction=="horizontal"?(qt=G.get(Et)?G.get(Et):Et,G.get(wt.id)?Zt={id:G.get(wt.id),gap:wt.gap,direction:wt.direction}:Zt=wt,st.has(qt)?st.get(qt).push(Zt):st.set(qt,[Zt]),st.has(Zt.id)||st.set(Zt.id,[])):(qt=H.get(Et)?H.get(Et):Et,H.get(wt.id)?Zt={id:H.get(wt.id),gap:wt.gap,direction:wt.direction}:Zt=wt,it.has(qt)?it.get(qt).push(Zt):it.set(qt,[Zt]),it.has(Zt.id)||it.set(Zt.id,[]))})},nt=!0,ft=!1,bt=void 0;try{for(var It=F.keys()[Symbol.iterator](),Bt;!(nt=(Bt=It.next()).done);nt=!0){var xt=Bt.value;dt(xt)}}catch(Yt){ft=!0,bt=Yt}finally{try{!nt&&It.return&&It.return()}finally{if(ft)throw bt}}var Lt=E(st),kt=E(it),St=l(Lt),Wt=l(kt),$t=d(st),de=d(it),Qt=[],jt=[];St.forEach(function(Yt,Et){Qt[Et]=[],Yt.forEach(function(wt){$t.get(wt).length==0&&Qt[Et].push(wt)})}),Wt.forEach(function(Yt,Et){jt[Et]=[],Yt.forEach(function(wt){de.get(wt).length==0&&jt[Et].push(wt)})});var _t=x(st,"horizontal",gt,$,Qt),Kt=x(it,"vertical",ct,j,jt),he=function(Et){W.get(Et)?W.get(Et).forEach(function(wt){y[p.get(wt)]=_t.get(Et)}):y[p.get(Et)]=_t.get(Et)},te=!0,ee=!1,Ie=void 0;try{for(var ve=_t.keys()[Symbol.iterator](),Re;!(te=(Re=ve.next()).done);te=!0){var pe=Re.value;he(pe)}}catch(Yt){ee=!0,Ie=Yt}finally{try{!te&&ve.return&&ve.return()}finally{if(ee)throw Ie}}var ur=function(Et){B.get(Et)?B.get(Et).forEach(function(wt){A[p.get(wt)]=Kt.get(Et)}):A[p.get(Et)]=Kt.get(Et)},ye=!0,Se=!1,Fe=void 0;try{for(var Ee=Kt.keys()[Symbol.iterator](),be;!(ye=(be=Ee.next()).done);ye=!0){var pe=be.value;ur(pe)}}catch(Yt){Se=!0,Fe=Yt}finally{try{!ye&&Ee.return&&Ee.return()}finally{if(Se)throw Fe}}}()}for(var Ht=0;Ht<R.length;Ht++){var Pt=R[Ht];Pt.getChild()==null&&Pt.setCenter(y[p.get(Pt.id)],A[p.get(Pt.id)])}},a.exports=o},551:a=>{a.exports=m}},L={};function g(a){var i=L[a];if(i!==void 0)return i.exports;var n=L[a]={exports:{}};return M[a](n,n.exports,g),n.exports}var s=g(45);return s})()})});var Ke=me((se,we)=>{(function(M,L){typeof se=="object"&&typeof we=="object"?we.exports=L(Me()):typeof define=="function"&&define.amd?define(["cose-base"],L):typeof se=="object"?se.cytoscapeFcose=L(Me()):M.cytoscapeFcose=L(M.coseBase)})(se,function(m){return(()=>{"use strict";var M={658:a=>{a.exports=Object.assign!=null?Object.assign.bind(Object):function(i){for(var n=arguments.length,f=Array(n>1?n-1:0),t=1;t<n;t++)f[t-1]=arguments[t];return f.forEach(function(u){Object.keys(u).forEach(function(r){return i[r]=u[r]})}),i}},548:(a,i,n)=>{var f=function(){function r(e,o){var c=[],h=!0,N=!1,p=void 0;try{for(var y=e[Symbol.iterator](),A;!(h=(A=y.next()).done)&&(c.push(A.value),!(o&&c.length===o));h=!0);}catch(R){N=!0,p=R}finally{try{!h&&y.return&&y.return()}finally{if(N)throw p}}return c}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t=n(140).layoutBase.LinkedList,u={};u.getTopMostNodes=function(r){for(var e={},o=0;o<r.length;o++)e[r[o].id()]=!0;var c=r.filter(function(h,N){typeof h=="number"&&(h=N);for(var p=h.parent()[0];p!=null;){if(e[p.id()])return!1;p=p.parent()[0]}return!0});return c},u.connectComponents=function(r,e,o,c){var h=new t,N=new Set,p=[],y=void 0,A=void 0,R=void 0,C=!1,S=1,V=[],Y=[],Q=function(){var k=r.collection();Y.push(k);var l=o[0],E=r.collection();E.merge(l).merge(l.descendants().intersection(e)),p.push(l),E.forEach(function(v){h.push(v),N.add(v),k.merge(v)});for(var d=function(){l=h.shift();var D=r.collection();l.neighborhood().nodes().forEach(function(I){e.intersection(l.edgesWith(I)).length>0&&D.merge(I)});for(var O=0;O<D.length;O++){var P=D[O];if(y=o.intersection(P.union(P.ancestors())),y!=null&&!N.has(y[0])){var F=y.union(y.descendants());F.forEach(function(I){h.push(I),N.add(I),k.merge(I),o.has(I)&&p.push(I)})}}};h.length!=0;)d();if(k.forEach(function(v){e.intersection(v.connectedEdges()).forEach(function(D){k.has(D.source())&&k.has(D.target())&&k.merge(D)})}),p.length==o.length&&(C=!0),!C||C&&S>1){A=p[0],R=A.connectedEdges().length,p.forEach(function(v){v.connectedEdges().length<R&&(R=v.connectedEdges().length,A=v)}),V.push(A.id());var T=r.collection();T.merge(p[0]),p.forEach(function(v){T.merge(v)}),p=[],o=o.difference(T),S++}};do Q();while(!C);return c&&V.length>0&&c.set("dummy"+(c.size+1),V),Y},u.relocateComponent=function(r,e,o){if(!o.fixedNodeConstraint){var c=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,N=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY;if(o.quality=="draft"){var y=!0,A=!1,R=void 0;try{for(var C=e.nodeIndexes[Symbol.iterator](),S;!(y=(S=C.next()).done);y=!0){var V=S.value,Y=f(V,2),Q=Y[0],x=Y[1],k=o.cy.getElementById(Q);if(k){var l=k.boundingBox(),E=e.xCoords[x]-l.w/2,d=e.xCoords[x]+l.w/2,T=e.yCoords[x]-l.h/2,v=e.yCoords[x]+l.h/2;E<c&&(c=E),d>h&&(h=d),T<N&&(N=T),v>p&&(p=v)}}}catch(I){A=!0,R=I}finally{try{!y&&C.return&&C.return()}finally{if(A)throw R}}var D=r.x-(h+c)/2,O=r.y-(p+N)/2;e.xCoords=e.xCoords.map(function(I){return I+D}),e.yCoords=e.yCoords.map(function(I){return I+O})}else{Object.keys(e).forEach(function(I){var Z=e[I],tt=Z.getRect().x,b=Z.getRect().x+Z.getRect().width,_=Z.getRect().y,z=Z.getRect().y+Z.getRect().height;tt<c&&(c=tt),b>h&&(h=b),_<N&&(N=_),z>p&&(p=z)});var P=r.x-(h+c)/2,F=r.y-(p+N)/2;Object.keys(e).forEach(function(I){var Z=e[I];Z.setCenter(Z.getCenterX()+P,Z.getCenterY()+F)})}}},u.calcBoundingBox=function(r,e,o,c){for(var h=Number.MAX_SAFE_INTEGER,N=Number.MIN_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER,A=void 0,R=void 0,C=void 0,S=void 0,V=r.descendants().not(":parent"),Y=V.length,Q=0;Q<Y;Q++){var x=V[Q];A=e[c.get(x.id())]-x.width()/2,R=e[c.get(x.id())]+x.width()/2,C=o[c.get(x.id())]-x.height()/2,S=o[c.get(x.id())]+x.height()/2,h>A&&(h=A),N<R&&(N=R),p>C&&(p=C),y<S&&(y=S)}var k={};return k.topLeftX=h,k.topLeftY=p,k.width=N-h,k.height=y-p,k},u.calcParentsWithoutChildren=function(r,e){var o=r.collection();return e.nodes(":parent").forEach(function(c){var h=!1;c.children().forEach(function(N){N.css("display")!="none"&&(h=!0)}),h||o.merge(c)}),o},a.exports=u},816:(a,i,n)=>{var f=n(548),t=n(140).CoSELayout,u=n(140).CoSENode,r=n(140).layoutBase.PointD,e=n(140).layoutBase.DimensionD,o=n(140).layoutBase.LayoutConstants,c=n(140).layoutBase.FDLayoutConstants,h=n(140).CoSEConstants,N=function(y,A){var R=y.cy,C=y.eles,S=C.nodes(),V=C.edges(),Y=void 0,Q=void 0,x=void 0,k={};y.randomize&&(Y=A.nodeIndexes,Q=A.xCoords,x=A.yCoords);var l=function(I){return typeof I=="function"},E=function(I,Z){return l(I)?I(Z):I},d=f.calcParentsWithoutChildren(R,C),T=function F(I,Z,tt,b){for(var _=Z.length,z=0;z<_;z++){var w=Z[z],U=null;w.intersection(d).length==0&&(U=w.children());var X=void 0,K=w.layoutDimensions({nodeDimensionsIncludeLabels:b.nodeDimensionsIncludeLabels});if(w.outerWidth()!=null&&w.outerHeight()!=null)if(b.randomize)if(!w.isParent())X=I.add(new u(tt.graphManager,new r(Q[Y.get(w.id())]-K.w/2,x[Y.get(w.id())]-K.h/2),new e(parseFloat(K.w),parseFloat(K.h))));else{var lt=f.calcBoundingBox(w,Q,x,Y);w.intersection(d).length==0?X=I.add(new u(tt.graphManager,new r(lt.topLeftX,lt.topLeftY),new e(lt.width,lt.height))):X=I.add(new u(tt.graphManager,new r(lt.topLeftX,lt.topLeftY),new e(parseFloat(K.w),parseFloat(K.h))))}else X=I.add(new u(tt.graphManager,new r(w.position("x")-K.w/2,w.position("y")-K.h/2),new e(parseFloat(K.w),parseFloat(K.h))));else X=I.add(new u(this.graphManager));if(X.id=w.data("id"),X.nodeRepulsion=E(b.nodeRepulsion,w),X.paddingLeft=parseInt(w.css("padding")),X.paddingTop=parseInt(w.css("padding")),X.paddingRight=parseInt(w.css("padding")),X.paddingBottom=parseInt(w.css("padding")),b.nodeDimensionsIncludeLabels&&(X.labelWidth=w.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,X.labelHeight=w.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,X.labelPosVertical=w.css("text-valign"),X.labelPosHorizontal=w.css("text-halign")),k[w.data("id")]=X,isNaN(X.rect.x)&&(X.rect.x=0),isNaN(X.rect.y)&&(X.rect.y=0),U!=null&&U.length>0){var At=void 0;At=tt.getGraphManager().add(tt.newGraph(),X),F(At,U,tt,b)}}},v=function(I,Z,tt){for(var b=0,_=0,z=0;z<tt.length;z++){var w=tt[z],U=k[w.data("source")],X=k[w.data("target")];if(U&&X&&U!==X&&U.getEdgesBetween(X).length==0){var K=Z.add(I.newEdge(),U,X);K.id=w.id(),K.idealLength=E(y.idealEdgeLength,w),K.edgeElasticity=E(y.edgeElasticity,w),b+=K.idealLength,_++}}y.idealEdgeLength!=null&&(_>0?h.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=b/_:l(y.idealEdgeLength)?h.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=50:h.DEFAULT_EDGE_LENGTH=c.DEFAULT_EDGE_LENGTH=y.idealEdgeLength,h.MIN_REPULSION_DIST=c.MIN_REPULSION_DIST=c.DEFAULT_EDGE_LENGTH/10,h.DEFAULT_RADIAL_SEPARATION=c.DEFAULT_EDGE_LENGTH)},D=function(I,Z){Z.fixedNodeConstraint&&(I.constraints.fixedNodeConstraint=Z.fixedNodeConstraint),Z.alignmentConstraint&&(I.constraints.alignmentConstraint=Z.alignmentConstraint),Z.relativePlacementConstraint&&(I.constraints.relativePlacementConstraint=Z.relativePlacementConstraint)};y.nestingFactor!=null&&(h.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=c.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=y.nestingFactor),y.gravity!=null&&(h.DEFAULT_GRAVITY_STRENGTH=c.DEFAULT_GRAVITY_STRENGTH=y.gravity),y.numIter!=null&&(h.MAX_ITERATIONS=c.MAX_ITERATIONS=y.numIter),y.gravityRange!=null&&(h.DEFAULT_GRAVITY_RANGE_FACTOR=c.DEFAULT_GRAVITY_RANGE_FACTOR=y.gravityRange),y.gravityCompound!=null&&(h.DEFAULT_COMPOUND_GRAVITY_STRENGTH=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH=y.gravityCompound),y.gravityRangeCompound!=null&&(h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=y.gravityRangeCompound),y.initialEnergyOnIncremental!=null&&(h.DEFAULT_COOLING_FACTOR_INCREMENTAL=c.DEFAULT_COOLING_FACTOR_INCREMENTAL=y.initialEnergyOnIncremental),y.tilingCompareBy!=null&&(h.TILING_COMPARE_BY=y.tilingCompareBy),y.quality=="proof"?o.QUALITY=2:o.QUALITY=0,h.NODE_DIMENSIONS_INCLUDE_LABELS=c.NODE_DIMENSIONS_INCLUDE_LABELS=o.NODE_DIMENSIONS_INCLUDE_LABELS=y.nodeDimensionsIncludeLabels,h.DEFAULT_INCREMENTAL=c.DEFAULT_INCREMENTAL=o.DEFAULT_INCREMENTAL=!y.randomize,h.ANIMATE=c.ANIMATE=o.ANIMATE=y.animate,h.TILE=y.tile,h.TILING_PADDING_VERTICAL=typeof y.tilingPaddingVertical=="function"?y.tilingPaddingVertical.call():y.tilingPaddingVertical,h.TILING_PADDING_HORIZONTAL=typeof y.tilingPaddingHorizontal=="function"?y.tilingPaddingHorizontal.call():y.tilingPaddingHorizontal,h.DEFAULT_INCREMENTAL=c.DEFAULT_INCREMENTAL=o.DEFAULT_INCREMENTAL=!0,h.PURE_INCREMENTAL=!y.randomize,o.DEFAULT_UNIFORM_LEAF_NODE_SIZES=y.uniformNodeDimensions,y.step=="transformed"&&(h.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,h.ENFORCE_CONSTRAINTS=!1,h.APPLY_LAYOUT=!1),y.step=="enforced"&&(h.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,h.ENFORCE_CONSTRAINTS=!0,h.APPLY_LAYOUT=!1),y.step=="cose"&&(h.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,h.ENFORCE_CONSTRAINTS=!1,h.APPLY_LAYOUT=!0),y.step=="all"&&(y.randomize?h.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:h.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,h.ENFORCE_CONSTRAINTS=!0,h.APPLY_LAYOUT=!0),y.fixedNodeConstraint||y.alignmentConstraint||y.relativePlacementConstraint?h.TREE_REDUCTION_ON_INCREMENTAL=!1:h.TREE_REDUCTION_ON_INCREMENTAL=!0;var O=new t,P=O.newGraphManager();return T(P.addRoot(),f.getTopMostNodes(S),O,y),v(O,P,V),D(O,y),O.runLayout(),k};a.exports={coseLayout:N}},212:(a,i,n)=>{var f=function(){function y(A,R){for(var C=0;C<R.length;C++){var S=R[C];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(A,S.key,S)}}return function(A,R,C){return R&&y(A.prototype,R),C&&y(A,C),A}}();function t(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")}var u=n(658),r=n(548),e=n(657),o=e.spectralLayout,c=n(816),h=c.coseLayout,N=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(A){return 4500},idealEdgeLength:function(A){return 50},edgeElasticity:function(A){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),p=function(){function y(A){t(this,y),this.options=u({},N,A)}return f(y,[{key:"run",value:function(){var R=this,C=this.options,S=C.cy,V=C.eles,Y=[],Q=void 0,x=void 0,k=[],l=void 0,E=[];C.fixedNodeConstraint&&(!Array.isArray(C.fixedNodeConstraint)||C.fixedNodeConstraint.length==0)&&(C.fixedNodeConstraint=void 0),C.alignmentConstraint&&(C.alignmentConstraint.vertical&&(!Array.isArray(C.alignmentConstraint.vertical)||C.alignmentConstraint.vertical.length==0)&&(C.alignmentConstraint.vertical=void 0),C.alignmentConstraint.horizontal&&(!Array.isArray(C.alignmentConstraint.horizontal)||C.alignmentConstraint.horizontal.length==0)&&(C.alignmentConstraint.horizontal=void 0)),C.relativePlacementConstraint&&(!Array.isArray(C.relativePlacementConstraint)||C.relativePlacementConstraint.length==0)&&(C.relativePlacementConstraint=void 0);var d=C.fixedNodeConstraint||C.alignmentConstraint||C.relativePlacementConstraint;d&&(C.tile=!1,C.packComponents=!1);var T=void 0,v=!1;if(S.layoutUtilities&&C.packComponents&&(T=S.layoutUtilities("get"),T||(T=S.layoutUtilities()),v=!0),V.nodes().length>0)if(v){var P=r.getTopMostNodes(C.eles.nodes());if(l=r.connectComponents(S,C.eles,P),l.forEach(function(ot){var et=ot.boundingBox();E.push({x:et.x1+et.w/2,y:et.y1+et.h/2})}),C.randomize&&l.forEach(function(ot){C.eles=ot,Y.push(o(C))}),C.quality=="default"||C.quality=="proof"){var F=S.collection();if(C.tile){var I=new Map,Z=[],tt=[],b=0,_={nodeIndexes:I,xCoords:Z,yCoords:tt},z=[];if(l.forEach(function(ot,et){ot.edges().length==0&&(ot.nodes().forEach(function(yt,mt){F.merge(ot.nodes()[mt]),yt.isParent()||(_.nodeIndexes.set(ot.nodes()[mt].id(),b++),_.xCoords.push(ot.nodes()[0].position().x),_.yCoords.push(ot.nodes()[0].position().y))}),z.push(et))}),F.length>1){var w=F.boundingBox();E.push({x:w.x1+w.w/2,y:w.y1+w.h/2}),l.push(F),Y.push(_);for(var U=z.length-1;U>=0;U--)l.splice(z[U],1),Y.splice(z[U],1),E.splice(z[U],1)}}l.forEach(function(ot,et){C.eles=ot,k.push(h(C,Y[et])),r.relocateComponent(E[et],k[et],C)})}else l.forEach(function(ot,et){r.relocateComponent(E[et],Y[et],C)});var X=new Set;if(l.length>1){var K=[],lt=V.filter(function(ot){return ot.css("display")=="none"});l.forEach(function(ot,et){var yt=void 0;if(C.quality=="draft"&&(yt=Y[et].nodeIndexes),ot.nodes().not(lt).length>0){var mt={};mt.edges=[],mt.nodes=[];var Ct=void 0;ot.nodes().not(lt).forEach(function(Tt){if(C.quality=="draft")if(!Tt.isParent())Ct=yt.get(Tt.id()),mt.nodes.push({x:Y[et].xCoords[Ct]-Tt.boundingbox().w/2,y:Y[et].yCoords[Ct]-Tt.boundingbox().h/2,width:Tt.boundingbox().w,height:Tt.boundingbox().h});else{var Nt=r.calcBoundingBox(Tt,Y[et].xCoords,Y[et].yCoords,yt);mt.nodes.push({x:Nt.topLeftX,y:Nt.topLeftY,width:Nt.width,height:Nt.height})}else k[et][Tt.id()]&&mt.nodes.push({x:k[et][Tt.id()].getLeft(),y:k[et][Tt.id()].getTop(),width:k[et][Tt.id()].getWidth(),height:k[et][Tt.id()].getHeight()})}),ot.edges().forEach(function(Tt){var Nt=Tt.source(),Dt=Tt.target();if(Nt.css("display")!="none"&&Dt.css("display")!="none")if(C.quality=="draft"){var Rt=yt.get(Nt.id()),zt=yt.get(Dt.id()),Gt=[],Ht=[];if(Nt.isParent()){var Pt=r.calcBoundingBox(Nt,Y[et].xCoords,Y[et].yCoords,yt);Gt.push(Pt.topLeftX+Pt.width/2),Gt.push(Pt.topLeftY+Pt.height/2)}else Gt.push(Y[et].xCoords[Rt]),Gt.push(Y[et].yCoords[Rt]);if(Dt.isParent()){var G=r.calcBoundingBox(Dt,Y[et].xCoords,Y[et].yCoords,yt);Ht.push(G.topLeftX+G.width/2),Ht.push(G.topLeftY+G.height/2)}else Ht.push(Y[et].xCoords[zt]),Ht.push(Y[et].yCoords[zt]);mt.edges.push({startX:Gt[0],startY:Gt[1],endX:Ht[0],endY:Ht[1]})}else k[et][Nt.id()]&&k[et][Dt.id()]&&mt.edges.push({startX:k[et][Nt.id()].getCenterX(),startY:k[et][Nt.id()].getCenterY(),endX:k[et][Dt.id()].getCenterX(),endY:k[et][Dt.id()].getCenterY()})}),mt.nodes.length>0&&(K.push(mt),X.add(et))}});var At=T.packComponents(K,C.randomize).shifts;if(C.quality=="draft")Y.forEach(function(ot,et){var yt=ot.xCoords.map(function(Ct){return Ct+At[et].dx}),mt=ot.yCoords.map(function(Ct){return Ct+At[et].dy});ot.xCoords=yt,ot.yCoords=mt});else{var Ft=0;X.forEach(function(ot){Object.keys(k[ot]).forEach(function(et){var yt=k[ot][et];yt.setCenter(yt.getCenterX()+At[Ft].dx,yt.getCenterY()+At[Ft].dy)}),Ft++})}}}else{var D=C.eles.boundingBox();if(E.push({x:D.x1+D.w/2,y:D.y1+D.h/2}),C.randomize){var O=o(C);Y.push(O)}C.quality=="default"||C.quality=="proof"?(k.push(h(C,Y[0])),r.relocateComponent(E[0],k[0],C)):r.relocateComponent(E[0],Y[0],C)}var J=function(et,yt){if(C.quality=="default"||C.quality=="proof"){typeof et=="number"&&(et=yt);var mt=void 0,Ct=void 0,Tt=et.data("id");return k.forEach(function(Dt){Tt in Dt&&(mt={x:Dt[Tt].getRect().getCenterX(),y:Dt[Tt].getRect().getCenterY()},Ct=Dt[Tt])}),C.nodeDimensionsIncludeLabels&&(Ct.labelWidth&&(Ct.labelPosHorizontal=="left"?mt.x+=Ct.labelWidth/2:Ct.labelPosHorizontal=="right"&&(mt.x-=Ct.labelWidth/2)),Ct.labelHeight&&(Ct.labelPosVertical=="top"?mt.y+=Ct.labelHeight/2:Ct.labelPosVertical=="bottom"&&(mt.y-=Ct.labelHeight/2))),mt==null&&(mt={x:et.position("x"),y:et.position("y")}),{x:mt.x,y:mt.y}}else{var Nt=void 0;return Y.forEach(function(Dt){var Rt=Dt.nodeIndexes.get(et.id());Rt!=null&&(Nt={x:Dt.xCoords[Rt],y:Dt.yCoords[Rt]})}),Nt==null&&(Nt={x:et.position("x"),y:et.position("y")}),{x:Nt.x,y:Nt.y}}};if(C.quality=="default"||C.quality=="proof"||C.randomize){var Xt=r.calcParentsWithoutChildren(S,V),Ot=V.filter(function(ot){return ot.css("display")=="none"});C.eles=V.not(Ot),V.nodes().not(":parent").not(Ot).layoutPositions(R,C,J),Xt.length>0&&Xt.forEach(function(ot){ot.position(J(ot))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),y}();a.exports=p},657:(a,i,n)=>{var f=n(548),t=n(140).layoutBase.Matrix,u=n(140).layoutBase.SVD,r=function(o){var c=o.cy,h=o.eles,N=h.nodes(),p=h.nodes(":parent"),y=new Map,A=new Map,R=new Map,C=[],S=[],V=[],Y=[],Q=[],x=[],k=[],l=[],E=void 0,d=void 0,T=1e8,v=1e-9,D=o.piTol,O=o.samplingType,P=o.nodeSeparation,F=void 0,I=function(){for(var W=0,B=0,$=!1;B<F;){W=Math.floor(Math.random()*d),$=!1;for(var j=0;j<B;j++)if(Y[j]==W){$=!0;break}if(!$)Y[B]=W,B++;else continue}},Z=function(W,B,$){for(var j=[],gt=0,ct=0,q=0,ht=void 0,ut=[],rt=0,vt=1,Mt=0;Mt<d;Mt++)ut[Mt]=T;for(j[ct]=W,ut[W]=0;ct>=gt;){q=j[gt++];for(var st=C[q],it=0;it<st.length;it++)ht=A.get(st[it]),ut[ht]==T&&(ut[ht]=ut[q]+1,j[++ct]=ht);x[q][B]=ut[q]*P}if($){for(var dt=0;dt<d;dt++)x[dt][B]<Q[dt]&&(Q[dt]=x[dt][B]);for(var nt=0;nt<d;nt++)Q[nt]>rt&&(rt=Q[nt],vt=nt)}return vt},tt=function(W){var B=void 0;if(W){B=Math.floor(Math.random()*d),E=B;for(var j=0;j<d;j++)Q[j]=T;for(var gt=0;gt<F;gt++)Y[gt]=B,B=Z(B,gt,W)}else{I();for(var $=0;$<F;$++)Z(Y[$],$,W,!1)}for(var ct=0;ct<d;ct++)for(var q=0;q<F;q++)x[ct][q]*=x[ct][q];for(var ht=0;ht<F;ht++)k[ht]=[];for(var ut=0;ut<F;ut++)for(var rt=0;rt<F;rt++)k[ut][rt]=x[Y[rt]][ut]},b=function(){for(var W=u.svd(k),B=W.S,$=W.U,j=W.V,gt=B[0]*B[0]*B[0],ct=[],q=0;q<F;q++){ct[q]=[];for(var ht=0;ht<F;ht++)ct[q][ht]=0,q==ht&&(ct[q][ht]=B[q]/(B[q]*B[q]+gt/(B[q]*B[q])))}l=t.multMat(t.multMat(j,ct),t.transpose($))},_=function(){for(var W=void 0,B=void 0,$=[],j=[],gt=[],ct=[],q=0;q<d;q++)$[q]=Math.random(),j[q]=Math.random();$=t.normalize($),j=t.normalize(j);for(var ht=0,ut=v,rt=v,vt=void 0;;){ht++;for(var Mt=0;Mt<d;Mt++)gt[Mt]=$[Mt];if($=t.multGamma(t.multL(t.multGamma(gt),x,l)),W=t.dotProduct(gt,$),$=t.normalize($),ut=t.dotProduct(gt,$),vt=Math.abs(ut/rt),vt<=1+D&&vt>=1)break;rt=ut}for(var st=0;st<d;st++)gt[st]=$[st];for(ht=0,rt=v;;){ht++;for(var it=0;it<d;it++)ct[it]=j[it];if(ct=t.minusOp(ct,t.multCons(gt,t.dotProduct(gt,ct))),j=t.multGamma(t.multL(t.multGamma(ct),x,l)),B=t.dotProduct(ct,j),j=t.normalize(j),ut=t.dotProduct(ct,j),vt=Math.abs(ut/rt),vt<=1+D&&vt>=1)break;rt=ut}for(var dt=0;dt<d;dt++)ct[dt]=j[dt];S=t.multCons(gt,Math.sqrt(Math.abs(W))),V=t.multCons(ct,Math.sqrt(Math.abs(B)))};f.connectComponents(c,h,f.getTopMostNodes(N),y),p.forEach(function(H){f.connectComponents(c,h,f.getTopMostNodes(H.descendants().intersection(h)),y)});for(var z=0,w=0;w<N.length;w++)N[w].isParent()||A.set(N[w].id(),z++);var U=!0,X=!1,K=void 0;try{for(var lt=y.keys()[Symbol.iterator](),At;!(U=(At=lt.next()).done);U=!0){var Ft=At.value;A.set(Ft,z++)}}catch(H){X=!0,K=H}finally{try{!U&&lt.return&&lt.return()}finally{if(X)throw K}}for(var J=0;J<A.size;J++)C[J]=[];p.forEach(function(H){for(var W=H.children().intersection(h);W.nodes(":childless").length==0;)W=W.nodes()[0].children().intersection(h);var B=0,$=W.nodes(":childless")[0].connectedEdges().length;W.nodes(":childless").forEach(function(j,gt){j.connectedEdges().length<$&&($=j.connectedEdges().length,B=gt)}),R.set(H.id(),W.nodes(":childless")[B].id())}),N.forEach(function(H){var W=void 0;H.isParent()?W=A.get(R.get(H.id())):W=A.get(H.id()),H.neighborhood().nodes().forEach(function(B){h.intersection(H.edgesWith(B)).length>0&&(B.isParent()?C[W].push(R.get(B.id())):C[W].push(B.id()))})});var Xt=function(W){var B=A.get(W),$=void 0;y.get(W).forEach(function(j){c.getElementById(j).isParent()?$=R.get(j):$=j,C[B].push($),C[A.get($)].push(W)})},Ot=!0,ot=!1,et=void 0;try{for(var yt=y.keys()[Symbol.iterator](),mt;!(Ot=(mt=yt.next()).done);Ot=!0){var Ct=mt.value;Xt(Ct)}}catch(H){ot=!0,et=H}finally{try{!Ot&&yt.return&&yt.return()}finally{if(ot)throw et}}d=A.size;var Tt=void 0;if(d>2){F=d<o.sampleSize?d:o.sampleSize;for(var Nt=0;Nt<d;Nt++)x[Nt]=[];for(var Dt=0;Dt<F;Dt++)l[Dt]=[];return o.quality=="draft"||o.step=="all"?(tt(O),b(),_(),Tt={nodeIndexes:A,xCoords:S,yCoords:V}):(A.forEach(function(H,W){S.push(c.getElementById(W).position("x")),V.push(c.getElementById(W).position("y"))}),Tt={nodeIndexes:A,xCoords:S,yCoords:V}),Tt}else{var Rt=A.keys(),zt=c.getElementById(Rt.next().value),Gt=zt.position(),Ht=zt.outerWidth();if(S.push(Gt.x),V.push(Gt.y),d==2){var Pt=c.getElementById(Rt.next().value),G=Pt.outerWidth();S.push(Gt.x+Ht/2+G/2+o.idealEdgeLength),V.push(Gt.y)}return Tt={nodeIndexes:A,xCoords:S,yCoords:V},Tt}};a.exports={spectralLayout:r}},579:(a,i,n)=>{var f=n(212),t=function(r){r&&r("layout","fcose",f)};typeof cytoscape<"u"&&t(cytoscape),a.exports=t},140:a=>{a.exports=m}},L={};function g(a){var i=L[a];if(i!==void 0)return i.exports;var n=L[a]={exports:{}};return M[a](n,n.exports,g),n.exports}var s=g(579);return s})()})});var ir=gr(Ke(),1);var je={L:"left",R:"right",T:"top",B:"bottom"},_e={L:at(m=>`${m},${m/2} 0,${m} 0,0`,"L"),R:at(m=>`0,${m/2} ${m},0 ${m},${m}`,"R"),T:at(m=>`0,0 ${m},0 ${m/2},${m}`,"T"),B:at(m=>`${m/2},0 ${m},${m} 0,${m}`,"B")},ue={L:at((m,M)=>m-M+2,"L"),R:at((m,M)=>m-2,"R"),T:at((m,M)=>m-M+2,"T"),B:at((m,M)=>m-2,"B")},dr=at(function(m){return Vt(m)?m==="L"?"R":"L":m==="T"?"B":"T"},"getOppositeArchitectureDirection"),tr=at(function(m){let M=m;return M==="L"||M==="R"||M==="T"||M==="B"},"isArchitectureDirection"),Vt=at(function(m){let M=m;return M==="L"||M==="R"},"isArchitectureDirectionX"),Jt=at(function(m){let M=m;return M==="T"||M==="B"},"isArchitectureDirectionY"),xe=at(function(m,M){let L=Vt(m)&&Jt(M),g=Jt(m)&&Vt(M);return L||g},"isArchitectureDirectionXY"),vr=at(function(m){let M=m[0],L=m[1],g=Vt(M)&&Jt(L),s=Jt(M)&&Vt(L);return g||s},"isArchitecturePairXY"),pr=at(function(m){return m!=="LL"&&m!=="RR"&&m!=="TT"&&m!=="BB"},"isValidArchitectureDirectionPair"),Oe=at(function(m,M){let L=`${m}${M}`;return pr(L)?L:void 0},"getArchitectureDirectionPair"),yr=at(function([m,M],L){let g=L[0],s=L[1];return Vt(g)?Jt(s)?[m+(g==="L"?-1:1),M+(s==="T"?1:-1)]:[m+(g==="L"?-1:1),M]:Vt(s)?[m+(s==="L"?1:-1),M+(g==="T"?1:-1)]:[m,M+(g==="T"?1:-1)]},"shiftPositionByArchitectureDirectionPair"),Er=at(function(m){return m==="LT"||m==="TL"?[1,1]:m==="BL"||m==="LB"?[1,-1]:m==="BR"||m==="RB"?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),mr=at(function(m,M){return xe(m,M)?"bend":Vt(m)?"horizontal":"vertical"},"getArchitectureDirectionAlignment"),Tr=at(function(m){return m.type==="service"},"isArchitectureService"),Nr=at(function(m){return m.type==="junction"},"isArchitectureJunction"),er=at(m=>m.data(),"edgeData"),ie=at(m=>m.data(),"nodeData"),rr=Pe.architecture,pt=new Je(()=>({nodes:{},groups:{},edges:[],registeredIds:{},config:rr,dataStructures:void 0,elements:{}})),Lr=at(()=>{pt.reset(),Ue()},"clear"),Ar=at(function({id:m,icon:M,in:L,title:g,iconText:s}){if(pt.records.registeredIds[m]!==void 0)throw new Error(`The service id [${m}] is already in use by another ${pt.records.registeredIds[m]}`);if(L!==void 0){if(m===L)throw new Error(`The service [${m}] cannot be placed within itself`);if(pt.records.registeredIds[L]===void 0)throw new Error(`The service [${m}]'s parent does not exist. Please make sure the parent is created before this service`);if(pt.records.registeredIds[L]==="node")throw new Error(`The service [${m}]'s parent is not a group`)}pt.records.registeredIds[m]="node",pt.records.nodes[m]={id:m,type:"service",icon:M,iconText:s,title:g,edges:[],in:L}},"addService"),Cr=at(()=>Object.values(pt.records.nodes).filter(Tr),"getServices"),Mr=at(function({id:m,in:M}){pt.records.registeredIds[m]="node",pt.records.nodes[m]={id:m,type:"junction",edges:[],in:M}},"addJunction"),wr=at(()=>Object.values(pt.records.nodes).filter(Nr),"getJunctions"),Or=at(()=>Object.values(pt.records.nodes),"getNodes"),De=at(m=>pt.records.nodes[m],"getNode"),Dr=at(function({id:m,icon:M,in:L,title:g}){if(pt.records.registeredIds[m]!==void 0)throw new Error(`The group id [${m}] is already in use by another ${pt.records.registeredIds[m]}`);if(L!==void 0){if(m===L)throw new Error(`The group [${m}] cannot be placed within itself`);if(pt.records.registeredIds[L]===void 0)throw new Error(`The group [${m}]'s parent does not exist. Please make sure the parent is created before this group`);if(pt.records.registeredIds[L]==="node")throw new Error(`The group [${m}]'s parent is not a group`)}pt.records.registeredIds[m]="group",pt.records.groups[m]={id:m,icon:M,title:g,in:L}},"addGroup"),xr=at(()=>Object.values(pt.records.groups),"getGroups"),Ir=at(function({lhsId:m,rhsId:M,lhsDir:L,rhsDir:g,lhsInto:s,rhsInto:a,lhsGroup:i,rhsGroup:n,title:f}){if(!tr(L))throw new Error(`Invalid direction given for left hand side of edge ${m}--${M}. Expected (L,R,T,B) got ${L}`);if(!tr(g))throw new Error(`Invalid direction given for right hand side of edge ${m}--${M}. Expected (L,R,T,B) got ${g}`);if(pt.records.nodes[m]===void 0&&pt.records.groups[m]===void 0)throw new Error(`The left-hand id [${m}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(pt.records.nodes[M]===void 0&&pt.records.groups[m]===void 0)throw new Error(`The right-hand id [${M}] does not yet exist. Please create the service/group before declaring an edge to it.`);let t=pt.records.nodes[m].in,u=pt.records.nodes[M].in;if(i&&t&&u&&t==u)throw new Error(`The left-hand id [${m}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(n&&t&&u&&t==u)throw new Error(`The right-hand id [${M}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);let r={lhsId:m,lhsDir:L,lhsInto:s,lhsGroup:i,rhsId:M,rhsDir:g,rhsInto:a,rhsGroup:n,title:f};pt.records.edges.push(r),pt.records.nodes[m]&&pt.records.nodes[M]&&(pt.records.nodes[m].edges.push(pt.records.edges[pt.records.edges.length-1]),pt.records.nodes[M].edges.push(pt.records.edges[pt.records.edges.length-1]))},"addEdge"),Rr=at(()=>pt.records.edges,"getEdges"),Sr=at(()=>{if(pt.records.dataStructures===void 0){let m={},M=Object.entries(pt.records.nodes).reduce((n,[f,t])=>(n[f]=t.edges.reduce((u,r)=>{let e=De(r.lhsId)?.in,o=De(r.rhsId)?.in;if(e&&o&&e!==o){let c=mr(r.lhsDir,r.rhsDir);c!=="bend"&&(m[e]??={},m[e][o]=c,m[o]??={},m[o][e]=c)}if(r.lhsId===f){let c=Oe(r.lhsDir,r.rhsDir);c&&(u[c]=r.rhsId)}else{let c=Oe(r.rhsDir,r.lhsDir);c&&(u[c]=r.lhsId)}return u},{}),n),{}),L=Object.keys(M)[0],g={[L]:1},s=Object.keys(M).reduce((n,f)=>f===L?n:{...n,[f]:1},{}),a=at(n=>{let f={[n]:[0,0]},t=[n];for(;t.length>0;){let u=t.shift();if(u){g[u]=1,delete s[u];let r=M[u],[e,o]=f[u];Object.entries(r).forEach(([c,h])=>{g[h]||(f[h]=yr([e,o],c),t.push(h))})}}return f},"BFS"),i=[a(L)];for(;Object.keys(s).length>0;)i.push(a(Object.keys(s)[0]));pt.records.dataStructures={adjList:M,spatialMaps:i,groupAlignments:m}}return pt.records.dataStructures},"getDataStructures"),Fr=at((m,M)=>{pt.records.elements[m]=M},"setElementForId"),br=at(m=>pt.records.elements[m],"getElementById"),ge={clear:Lr,setDiagramTitle:Ve,getDiagramTitle:ze,setAccTitle:Ye,getAccTitle:Xe,setAccDescription:He,getAccDescription:We,addService:Ar,getServices:Cr,addJunction:Mr,getJunctions:wr,getNodes:Or,getNode:De,addGroup:Dr,getGroups:xr,addEdge:Ir,getEdges:Rr,setElementForId:Fr,getElementById:br,getDataStructures:Sr};function Ut(m){let M=ae().architecture;return M?.[m]?M[m]:rr[m]}at(Ut,"getConfigField");var Pr=at((m,M)=>{qe(m,M),m.groups.map(M.addGroup),m.services.map(L=>M.addService({...L,type:"service"})),m.junctions.map(L=>M.addJunction({...L,type:"junction"})),m.edges.map(M.addEdge)},"populateDb"),Gr={parse:at(async m=>{let M=await Qe("architecture",m);Te.debug(M),Pr(M,ge)},"parse")},Ur=at(m=>`
  .edge {
    stroke-width: ${m.archEdgeWidth};
    stroke: ${m.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${m.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${m.archGroupBorderColor};
    stroke-width: ${m.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`,"getStyles"),Yr=Ur,re=at(m=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${m}</g>`,"wrapIcon"),le={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:re('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:re('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:re('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:re('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:re('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:Be,blank:{body:re("")}}},Xr=at(async function(m,M){let L=Ut("padding"),g=Ut("iconSize"),s=g/2,a=g/6,i=a/2;await Promise.all(M.edges().map(async n=>{let{source:f,sourceDir:t,sourceArrow:u,sourceGroup:r,target:e,targetDir:o,targetArrow:c,targetGroup:h,label:N}=er(n),{x:p,y}=n[0].sourceEndpoint(),{x:A,y:R}=n[0].midpoint(),{x:C,y:S}=n[0].targetEndpoint(),V=L+4;if(r&&(Vt(t)?p+=t==="L"?-V:V:y+=t==="T"?-V:V+18),h&&(Vt(o)?C+=o==="L"?-V:V:S+=o==="T"?-V:V+18),!r&&ge.getNode(f)?.type==="junction"&&(Vt(t)?p+=t==="L"?s:-s:y+=t==="T"?s:-s),!h&&ge.getNode(e)?.type==="junction"&&(Vt(o)?C+=o==="L"?s:-s:S+=o==="T"?s:-s),n[0]._private.rscratch){let Y=m.insert("g");if(Y.insert("path").attr("d",`M ${p},${y} L ${A},${R} L${C},${S} `).attr("class","edge"),u){let Q=Vt(t)?ue[t](p,a):p-i,x=Jt(t)?ue[t](y,a):y-i;Y.insert("polygon").attr("points",_e[t](a)).attr("transform",`translate(${Q},${x})`).attr("class","arrow")}if(c){let Q=Vt(o)?ue[o](C,a):C-i,x=Jt(o)?ue[o](S,a):S-i;Y.insert("polygon").attr("points",_e[o](a)).attr("transform",`translate(${Q},${x})`).attr("class","arrow")}if(N){let Q=xe(t,o)?"XY":Vt(t)?"X":"Y",x=0;Q==="X"?x=Math.abs(p-C):Q==="Y"?x=Math.abs(y-S)/1.5:x=Math.abs(p-C)/2;let k=Y.append("g");if(await ce(k,N,{useHtmlLabels:!1,width:x,classes:"architecture-service-label"},ae()),k.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),Q==="X")k.attr("transform","translate("+A+", "+R+")");else if(Q==="Y")k.attr("transform","translate("+A+", "+R+") rotate(-90)");else if(Q==="XY"){let l=Oe(t,o);if(l&&vr(l)){let E=k.node().getBoundingClientRect(),[d,T]=Er(l);k.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*d*T*45})`);let v=k.node().getBoundingClientRect();k.attr("transform",`
                translate(${A}, ${R-E.height/2})
                translate(${d*v.width/2}, ${T*v.height/2})
                rotate(${-1*d*T*45}, 0, ${E.height/2})
              `)}}}}}))},"drawEdges"),Hr=at(async function(m,M){let g=Ut("padding")*.75,s=Ut("fontSize"),i=Ut("iconSize")/2;await Promise.all(M.nodes().map(async n=>{let f=ie(n);if(f.type==="group"){let{h:t,w:u,x1:r,y1:e}=n.boundingBox();m.append("rect").attr("x",r+i).attr("y",e+i).attr("width",u).attr("height",t).attr("class","node-bkg");let o=m.append("g"),c=r,h=e;if(f.icon){let N=o.append("g");N.html(`<g>${await fe(f.icon,{height:g,width:g,fallbackPrefix:le.prefix})}</g>`),N.attr("transform","translate("+(c+i+1)+", "+(h+i+1)+")"),c+=g,h+=s/2-1-2}if(f.label){let N=o.append("g");await ce(N,f.label,{useHtmlLabels:!1,width:u,classes:"architecture-service-label"},ae()),N.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),N.attr("transform","translate("+(c+i+4)+", "+(h+i+2)+")")}}}))},"drawGroups"),Wr=at(async function(m,M,L){for(let g of L){let s=M.append("g"),a=Ut("iconSize");if(g.title){let t=s.append("g");await ce(t,g.title,{useHtmlLabels:!1,width:a*1.5,classes:"architecture-service-label"},ae()),t.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),t.attr("transform","translate("+a/2+", "+a+")")}let i=s.append("g");if(g.icon)i.html(`<g>${await fe(g.icon,{height:a,width:a,fallbackPrefix:le.prefix})}</g>`);else if(g.iconText){i.html(`<g>${await fe("blank",{height:a,width:a,fallbackPrefix:le.prefix})}</g>`);let r=i.append("g").append("foreignObject").attr("width",a).attr("height",a).append("div").attr("class","node-icon-text").attr("style",`height: ${a}px;`).append("div").html(g.iconText),e=parseInt(window.getComputedStyle(r.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;r.attr("style",`-webkit-line-clamp: ${Math.floor((a-2)/e)};`)}else i.append("path").attr("class","node-bkg").attr("id","node-"+g.id).attr("d",`M0 ${a} v${-a} q0,-5 5,-5 h${a} q5,0 5,5 v${a} H0 Z`);s.attr("class","architecture-service");let{width:n,height:f}=s._groups[0][0].getBBox();g.width=n,g.height=f,m.setElementForId(g.id,s)}return 0},"drawServices"),Vr=at(function(m,M,L){L.forEach(g=>{let s=M.append("g"),a=Ut("iconSize");s.append("g").append("rect").attr("id","node-"+g.id).attr("fill-opacity","0").attr("width",a).attr("height",a),s.attr("class","architecture-junction");let{width:n,height:f}=s._groups[0][0].getBBox();s.width=n,s.height=f,m.setElementForId(g.id,s)})},"drawJunctions");$e([{name:le.prefix,icons:le}]);Ne.use(ir.default);function ar(m,M){m.forEach(L=>{M.add({group:"nodes",data:{type:"service",id:L.id,icon:L.icon,label:L.title,parent:L.in,width:Ut("iconSize"),height:Ut("iconSize")},classes:"node-service"})})}at(ar,"addServices");function nr(m,M){m.forEach(L=>{M.add({group:"nodes",data:{type:"junction",id:L.id,parent:L.in,width:Ut("iconSize"),height:Ut("iconSize")},classes:"node-junction"})})}at(nr,"addJunctions");function or(m,M){M.nodes().map(L=>{let g=ie(L);if(g.type==="group")return;g.x=L.position().x,g.y=L.position().y,m.getElementById(g.id).attr("transform","translate("+(g.x||0)+","+(g.y||0)+")")})}at(or,"positionNodes");function sr(m,M){m.forEach(L=>{M.add({group:"nodes",data:{type:"group",id:L.id,icon:L.icon,label:L.title,parent:L.in},classes:"node-group"})})}at(sr,"addGroups");function lr(m,M){m.forEach(L=>{let{lhsId:g,rhsId:s,lhsInto:a,lhsGroup:i,rhsInto:n,lhsDir:f,rhsDir:t,rhsGroup:u,title:r}=L,e=xe(L.lhsDir,L.rhsDir)?"segments":"straight",o={id:`${g}-${s}`,label:r,source:g,sourceDir:f,sourceArrow:a,sourceGroup:i,sourceEndpoint:f==="L"?"0 50%":f==="R"?"100% 50%":f==="T"?"50% 0":"50% 100%",target:s,targetDir:t,targetArrow:n,targetGroup:u,targetEndpoint:t==="L"?"0 50%":t==="R"?"100% 50%":t==="T"?"50% 0":"50% 100%"};M.add({group:"edges",data:o,classes:e})})}at(lr,"addEdges");function hr(m,M,L){let g=at((n,f)=>Object.entries(n).reduce((t,[u,r])=>{let e=0,o=Object.entries(r);if(o.length===1)return t[u]=o[0][1],t;for(let c=0;c<o.length-1;c++)for(let h=c+1;h<o.length;h++){let[N,p]=o[c],[y,A]=o[h];if(L[N]?.[y]===f)t[u]??=[],t[u]=[...t[u],...p,...A];else if(N==="default"||y==="default")t[u]??=[],t[u]=[...t[u],...p,...A];else{let C=`${u}-${e++}`;t[C]=p;let S=`${u}-${e++}`;t[S]=A}}return t},{}),"flattenAlignments"),s=M.map(n=>{let f={},t={};return Object.entries(n).forEach(([u,[r,e]])=>{let o=m.getNode(u)?.in??"default";f[e]??={},f[e][o]??=[],f[e][o].push(u),t[r]??={},t[r][o]??=[],t[r][o].push(u)}),{horiz:Object.values(g(f,"horizontal")).filter(u=>u.length>1),vert:Object.values(g(t,"vertical")).filter(u=>u.length>1)}}),[a,i]=s.reduce(([n,f],{horiz:t,vert:u})=>[[...n,...t],[...f,...u]],[[],[]]);return{horizontal:a,vertical:i}}at(hr,"getAlignments");function fr(m){let M=[],L=at(s=>`${s[0]},${s[1]}`,"posToStr"),g=at(s=>s.split(",").map(a=>parseInt(a)),"strToPos");return m.forEach(s=>{let a=Object.fromEntries(Object.entries(s).map(([t,u])=>[L(u),t])),i=[L([0,0])],n={},f={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;i.length>0;){let t=i.shift();if(t){n[t]=1;let u=a[t];if(u){let r=g(t);Object.entries(f).forEach(([e,o])=>{let c=L([r[0]+o[0],r[1]+o[1]]),h=a[c];h&&!n[c]&&(i.push(c),M.push({[je[e]]:h,[je[dr(e)]]:u,gap:1.5*Ut("iconSize")}))})}}}}),M}at(fr,"getRelativeConstraints");function cr(m,M,L,g,s,{spatialMaps:a,groupAlignments:i}){return new Promise(n=>{let f=Ze("body").append("div").attr("id","cy").attr("style","display:none"),t=Ne({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${Ut("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${Ut("padding")}px`}}]});f.remove(),sr(L,t),ar(m,t),nr(M,t),lr(g,t);let u=hr(s,a,i),r=fr(a),e=t.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(o){let[c,h]=o.connectedNodes(),{parent:N}=ie(c),{parent:p}=ie(h);return N===p?1.5*Ut("iconSize"):.5*Ut("iconSize")},edgeElasticity(o){let[c,h]=o.connectedNodes(),{parent:N}=ie(c),{parent:p}=ie(h);return N===p?.45:.001},alignmentConstraint:u,relativePlacementConstraint:r});e.one("layoutstop",()=>{function o(c,h,N,p){let y,A,{x:R,y:C}=c,{x:S,y:V}=h;A=(p-C+(R-N)*(C-V)/(R-S))/Math.sqrt(1+Math.pow((C-V)/(R-S),2)),y=Math.sqrt(Math.pow(p-C,2)+Math.pow(N-R,2)-Math.pow(A,2));let Y=Math.sqrt(Math.pow(S-R,2)+Math.pow(V-C,2));y=y/Y;let Q=(S-R)*(p-C)-(V-C)*(N-R);switch(!0){case Q>=0:Q=1;break;case Q<0:Q=-1;break}let x=(S-R)*(N-R)+(V-C)*(p-C);switch(!0){case x>=0:x=1;break;case x<0:x=-1;break}return A=Math.abs(A)*Q,y=y*x,{distances:A,weights:y}}at(o,"getSegmentWeights"),t.startBatch();for(let c of Object.values(t.edges()))if(c.data?.()){let{x:h,y:N}=c.source().position(),{x:p,y}=c.target().position();if(h!==p&&N!==y){let A=c.sourceEndpoint(),R=c.targetEndpoint(),{sourceDir:C}=er(c),[S,V]=Jt(C)?[A.x,R.y]:[R.x,A.y],{weights:Y,distances:Q}=o(A,R,S,V);c.style("segment-distances",Q),c.style("segment-weights",Y)}}t.endBatch(),e.run()}),e.run(),t.ready(o=>{Te.info("Ready",o),n(t)})})}at(cr,"layoutArchitecture");var zr=at(async(m,M,L,g)=>{let s=g.db,a=s.getServices(),i=s.getJunctions(),n=s.getGroups(),f=s.getEdges(),t=s.getDataStructures(),u=ke(M),r=u.append("g");r.attr("class","architecture-edges");let e=u.append("g");e.attr("class","architecture-services");let o=u.append("g");o.attr("class","architecture-groups"),await Wr(s,e,a),Vr(s,e,i);let c=await cr(a,i,n,f,s,t);await Xr(r,c),await Hr(o,c),or(s,c),Ge(void 0,u,Ut("padding"),Ut("useMaxWidth"))},"draw"),Br={draw:zr},ei={parser:Gr,db:ge,renderer:Br,styles:Yr};export{ei as diagram};
//# sourceMappingURL=architectureDiagram-IEHRJDOE-JO4P76TI.min.js.map
